<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2362px" preserveAspectRatio="none" style="width:1695px;height:2362px;background:#FFFFFF;" version="1.1" viewBox="0 0 1695 2362" width="1695px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="2350.0156" style="stroke:#181818;stroke-width:0.5;" width="1109.5" x="483" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="109" x="983.25" y="18.0669">CAPIF Internal</text><rect fill="none" height="1246.5078" style="stroke:#000000;stroke-width:1.5;" width="1608.5" x="10" y="98.2969"/><rect fill="#98FB98" height="251.4609" style="stroke:#000000;stroke-width:1.5;" width="574.5" x="251.5" y="181.8281"/><rect fill="#ADD8E6" height="463.3906" style="stroke:#000000;stroke-width:1.5;" width="1484.5" x="124" y="447.2891"/><rect fill="#FFA500" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1464.5" x="134" y="739.75"/><rect fill="#FF7F50" height="383.9922" style="stroke:#000000;stroke-width:1.5;" width="1484.5" x="124" y="924.6797"/><rect fill="#FFA500" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1464.5" x="134" y="1137.7422"/><rect fill="#FFFF00" height="386.3906" style="stroke:#000000;stroke-width:1.5;" width="1215.5" x="134" y="1358.8047"/><rect fill="#FFC0CB" height="368.9922" style="stroke:#000000;stroke-width:1.5;" width="1347.5" x="134" y="1759.1953"/><rect fill="#FFA500" height="117.5313" style="stroke:#000000;stroke-width:1.5;" width="1555" x="134" y="2142.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="77" x2="77" y1="81.2969" y2="2276.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="165" x2="165" y1="81.2969" y2="2276.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="316.5" x2="316.5" y1="81.2969" y2="2276.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="528" x2="528" y1="81.2969" y2="2276.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="662" x2="662" y1="81.2969" y2="2276.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="820.5" x2="820.5" y1="81.2969" y2="2276.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="945.5" x2="945.5" y1="81.2969" y2="2276.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1110.5" x2="1110.5" y1="81.2969" y2="2276.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1276.5" x2="1276.5" y1="81.2969" y2="2276.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1410.5" x2="1410.5" y1="81.2969" y2="2276.7188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1534.5" x2="1534.5" y1="81.2969" y2="2276.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="20" y="77.9951">rAppCatalogue</text><ellipse cx="77" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M77,21.5 L77,48.5 M64,29.5 L90,29.5 M77,48.5 L64,63.5 M77,48.5 L90,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="20" y="2288.7139">rAppCatalogue</text><ellipse cx="77" cy="2300.5156" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M77,2308.5156 L77,2335.5156 M64,2316.5156 L90,2316.5156 M77,2335.5156 L64,2350.5156 M77,2335.5156 L90,2350.5156 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="144" y="77.9951">rApp</text><ellipse cx="165" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M165,21.5 L165,48.5 M152,29.5 L178,29.5 M165,48.5 L152,63.5 M165,48.5 L178,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="144" y="2288.7139">rApp</text><ellipse cx="165" cy="2300.5156" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M165,2308.5156 L165,2335.5156 M152,2316.5156 L178,2316.5156 M165,2335.5156 L152,2350.5156 M165,2335.5156 L178,2350.5156 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="261.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="268.5" y="69.9951">rAppManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="261.5" y="2275.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="268.5" y="2295.7139">rAppManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="487" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="494" y="69.9951">capifcore</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="487" y="2275.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="494" y="2295.7139">capifcore</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="593" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="600" y="69.9951">providermanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="593" y="2275.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="600" y="2295.7139">providermanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="764.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="771.5" y="69.9951">helmmanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="764.5" y="2275.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="771.5" y="2295.7139">helmmanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="887.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="894.5" y="69.9951">publishservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="887.5" y="2275.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="894.5" y="2295.7139">publishservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1051.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1058.5" y="69.9951">invokerservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1051.5" y="2275.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1058.5" y="2295.7139">invokerservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1214.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1221.5" y="69.9951">discoverservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1214.5" y="2275.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1221.5" y="2295.7139">discoverservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1349.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1356.5" y="69.9951">securityservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1349.5" y="2275.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1356.5" y="2295.7139">securityservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1481.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1488.5" y="69.9951">eventservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1481.5" y="2275.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1488.5" y="2295.7139">eventservice</text><path d="M10,98.2969 L76,98.2969 L76,105.4297 L66,115.4297 L10,115.4297 L10,98.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1246.5078" style="stroke:#000000;stroke-width:1.5;" width="1608.5" x="10" y="98.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="111.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="320" x="91" y="110.5073">[Regtister rApp as both provider and consumer]</text><polygon fill="#181818" points="305,162.8281,315,166.8281,305,170.8281,309,166.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="77" x2="311" y1="166.8281" y2="166.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="84" y="131.4966">Register rApp, with rApp</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="88" y="146.6294">descriptor specifying which</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="88" y="161.7622">services to expose and consume</text><path d="M251.5,181.8281 L317.5,181.8281 L317.5,188.9609 L307.5,198.9609 L251.5,198.9609 L251.5,181.8281 " fill="#98FB98" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="251.4609" style="stroke:#000000;stroke-width:1.5;" width="574.5" x="251.5" y="181.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="266.5" y="194.895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="140" x="332.5" y="194.0386">[Provider Enrolment]</text><polygon fill="#181818" points="516,231.2266,526,235.2266,516,239.2266,520,235.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="317" x2="522" y1="235.2266" y2="235.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="324" y="215.0278">Register provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="328" y="230.1606">APIProviderEnrolmentDetails</text><polygon fill="#181818" points="650,260.3594,660,264.3594,650,268.3594,654,264.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="528" x2="656" y1="264.3594" y2="264.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="535" y="259.2935">Register provider</text><line style="stroke:#181818;stroke-width:1.0;" x1="662" x2="704" y1="323.7578" y2="323.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="704" x2="704" y1="323.7578" y2="336.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="663" x2="704" y1="336.7578" y2="336.7578"/><polygon fill="#181818" points="673,332.7578,663,336.7578,673,340.7578,669,336.7578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="669" y="288.4263">Create apiProvDomId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="673" y="303.5591">and apiProvFuncIds</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="673" y="318.6919">for provided functions</text><polygon fill="#181818" points="539,377.0234,529,381.0234,539,385.0234,535,381.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="533" x2="661" y1="381.0234" y2="381.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="545" y="360.8247">Provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="549" y="375.9575">apfId and aefIds</text><polygon fill="#181818" points="328,421.2891,318,425.2891,328,429.2891,324,425.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="322" x2="527" y1="425.2891" y2="425.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="334" y="405.0903">Provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="338" y="420.2231">apfId and aefIds</text><path d="M124,447.2891 L190,447.2891 L190,454.4219 L180,464.4219 L124,464.4219 L124,447.2891 " fill="#ADD8E6" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="463.3906" style="stroke:#000000;stroke-width:1.5;" width="1484.5" x="124" y="447.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="139" y="460.356">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="205" y="459.4995">[Publish Service]</text><polygon fill="#181818" points="516,511.8203,526,515.8203,516,519.8203,520,515.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="317" x2="522" y1="515.8203" y2="515.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="324" y="480.4888">Publish services</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="328" y="495.6216">with providerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="328" y="510.7544">andServiceAPIDescription</text><polygon fill="#181818" points="934,540.9531,944,544.9531,934,548.9531,938,544.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="528" x2="940" y1="544.9531" y2="544.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="535" y="539.8872">Publish services</text><polygon fill="#181818" points="673,585.2188,663,589.2188,673,593.2188,669,589.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="667" x2="945" y1="589.2188" y2="589.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="679" y="569.02">Are AEFs registered</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="683" y="584.1528">for provider?</text><polygon fill="#181818" points="934,614.3516,944,618.3516,934,622.3516,938,618.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="662" x2="940" y1="618.3516" y2="618.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="669" y="613.2856">Ok</text><line style="stroke:#181818;stroke-width:1.0;" x1="946" x2="988" y1="647.4844" y2="647.4844"/><line style="stroke:#181818;stroke-width:1.0;" x1="988" x2="988" y1="647.4844" y2="660.4844"/><line style="stroke:#181818;stroke-width:1.0;" x1="947" x2="988" y1="660.4844" y2="660.4844"/><polygon fill="#181818" points="957,656.4844,947,660.4844,957,664.4844,953,660.4844" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="953" y="642.4185">Create apiId</text><polygon fill="#181818" points="832,688.6172,822,692.6172,832,696.6172,828,692.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="826" x2="945" y1="692.6172" y2="692.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="838" y="687.5513">Install chart</text><path d="M951,673.4844 L951,698.4844 L1157,698.4844 L1157,683.4844 L1147,673.4844 L951,673.4844 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1147,673.4844 L1147,683.4844 L1157,683.4844 L1147,673.4844 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="957" y="690.5513">Optional and not decided yet</text><polygon fill="#181818" points="934,720.75,944,724.75,934,728.75,938,724.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="821" x2="940" y1="724.75" y2="724.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="828" y="719.6841">Ok</text><path d="M134,739.75 L200,739.75 L200,746.8828 L190,756.8828 L134,756.8828 L134,739.75 " fill="#FFA500" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1464.5" x="134" y="739.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="149" y="752.8169">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="215" y="751.9604">[Subcribed Event Handling]</text><polygon fill="#181818" points="1523,774.0156,1533,778.0156,1523,782.0156,1527,778.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="946" x2="1529" y1="778.0156" y2="778.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="953" y="772.9497">Service published</text><polygon fill="#181818" points="176,803.1484,166,807.1484,176,811.1484,172,807.1484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="170" x2="1534" y1="807.1484" y2="807.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="182" y="802.0825">CAPIFEventDetail</text><polygon fill="#181818" points="539,854.4141,529,858.4141,539,862.4141,535,858.4141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="533" x2="945" y1="858.4141" y2="858.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="545" y="838.2153">ServiceAPIDescription</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="549" y="853.3481">with apiId</text><polygon fill="#181818" points="328,898.6797,318,902.6797,328,906.6797,324,902.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="322" x2="527" y1="902.6797" y2="902.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="334" y="882.481">ServiceAPIDescription</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="338" y="897.6138">with apiId</text><path d="M124,924.6797 L190,924.6797 L190,931.8125 L180,941.8125 L124,941.8125 L124,924.6797 " fill="#FF7F50" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="383.9922" style="stroke:#000000;stroke-width:1.5;" width="1484.5" x="124" y="924.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="139" y="937.7466">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="119" x="205" y="936.8901">[Register Invoker]</text><polygon fill="#181818" points="516,974.0781,526,978.0781,516,982.0781,520,978.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="317" x2="522" y1="978.0781" y2="978.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="324" y="957.8794">Register invoker with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="328" y="973.0122">APIInvokerEnrolmentDetails</text><polygon fill="#181818" points="1099,1003.2109,1109,1007.2109,1099,1011.2109,1103,1007.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="528" x2="1105" y1="1007.2109" y2="1007.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="535" y="1002.145">Register invoker</text><line style="stroke:#181818;stroke-width:1.0;" x1="1111" x2="1153" y1="1051.4766" y2="1051.4766"/><line style="stroke:#181818;stroke-width:1.0;" x1="1153" x2="1153" y1="1051.4766" y2="1064.4766"/><line style="stroke:#181818;stroke-width:1.0;" x1="1112" x2="1153" y1="1064.4766" y2="1064.4766"/><polygon fill="#181818" points="1122,1060.4766,1112,1064.4766,1122,1068.4766,1118,1064.4766" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="1118" y="1031.2778">Create apiInvokerId and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="1122" y="1046.4106">onboardingSecret</text><polygon fill="#181818" points="957,1089.6094,947,1093.6094,957,1097.6094,953,1093.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="951" x2="1110" y1="1093.6094" y2="1093.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="963" y="1088.5435">Get available services</text><polygon fill="#181818" points="1099,1118.7422,1109,1122.7422,1099,1126.7422,1103,1122.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="946" x2="1105" y1="1122.7422" y2="1122.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="953" y="1117.6763">Available services</text><path d="M134,1137.7422 L200,1137.7422 L200,1144.875 L190,1154.875 L134,1154.875 L134,1137.7422 " fill="#FFA500" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1464.5" x="134" y="1137.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="149" y="1150.8091">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="215" y="1149.9526">[Subcribed Event Handling]</text><polygon fill="#181818" points="1523,1172.0078,1533,1176.0078,1523,1180.0078,1527,1176.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1111" x2="1529" y1="1176.0078" y2="1176.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1118" y="1170.9419">Invoker registered</text><polygon fill="#181818" points="176,1201.1406,166,1205.1406,176,1209.1406,172,1205.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="170" x2="1534" y1="1205.1406" y2="1205.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="182" y="1200.0747">CAPIFEventDetail</text><polygon fill="#181818" points="539,1252.4063,529,1256.4063,539,1260.4063,535,1256.4063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="533" x2="1110" y1="1256.4063" y2="1256.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="545" y="1236.2075">Services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="549" y="1251.3403">for the invoker</text><polygon fill="#181818" points="328,1296.6719,318,1300.6719,328,1304.6719,324,1300.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="322" x2="527" y1="1300.6719" y2="1300.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="334" y="1280.4731">Invoker with invokerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="338" y="1295.606">and available services</text><polygon fill="#181818" points="88,1332.8047,78,1336.8047,88,1340.8047,84,1336.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="82" x2="316" y1="1336.8047" y2="1336.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="94" y="1331.7388">Ok</text><path d="M134,1358.8047 L200,1358.8047 L200,1365.9375 L190,1375.9375 L134,1375.9375 L134,1358.8047 " fill="#FFFF00" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="386.3906" style="stroke:#000000;stroke-width:1.5;" width="1215.5" x="134" y="1358.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="149" y="1371.8716">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126" x="215" y="1371.0151">[Discover Services]</text><polygon fill="#181818" points="516,1423.3359,526,1427.3359,516,1431.3359,520,1427.3359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="165" x2="522" y1="1427.3359" y2="1427.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="172" y="1392.0044">Discover services for an</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="176" y="1407.1372">invoker with apiInvokerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="176" y="1422.27">and filter parameters</text><polygon fill="#181818" points="1265,1467.6016,1275,1471.6016,1265,1475.6016,1269,1471.6016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="528" x2="1271" y1="1471.6016" y2="1471.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="535" y="1451.4028">Get services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="539" y="1466.5356">for the invoker</text><polygon fill="#181818" points="1122,1511.8672,1112,1515.8672,1122,1519.8672,1118,1515.8672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1116" x2="1276" y1="1515.8672" y2="1515.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="1128" y="1495.6685">Get services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1132" y="1510.8013">for the invoker</text><polygon fill="#181818" points="957,1541,947,1545,957,1549,953,1545" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="951" x2="1110" y1="1545" y2="1545"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="963" y="1539.9341">Get available services</text><polygon fill="#181818" points="1099,1570.1328,1109,1574.1328,1099,1578.1328,1103,1574.1328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="946" x2="1105" y1="1574.1328" y2="1574.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="953" y="1569.0669">Available services</text><polygon fill="#181818" points="1265,1614.3984,1275,1618.3984,1265,1622.3984,1269,1618.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1111" x2="1271" y1="1618.3984" y2="1618.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="1118" y="1598.1997">Services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1118" y="1613.3325">for the invoker</text><polygon fill="#181818" points="539,1673.7969,529,1677.7969,539,1681.7969,535,1677.7969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="533" x2="1276" y1="1677.7969" y2="1677.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="545" y="1642.4653">Services available for the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="549" y="1657.5981">invoker matching the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="549" y="1672.731">filter parameters</text><polygon fill="#181818" points="176,1733.1953,166,1737.1953,176,1741.1953,172,1737.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="170" x2="527" y1="1737.1953" y2="1737.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="182" y="1701.8638">Services available for the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="186" y="1716.9966">invoker and matching the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="186" y="1732.1294">filter parameters</text><path d="M134,1759.1953 L200,1759.1953 L200,1766.3281 L190,1776.3281 L134,1776.3281 L134,1759.1953 " fill="#FFC0CB" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="368.9922" style="stroke:#000000;stroke-width:1.5;" width="1347.5" x="134" y="1759.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="149" y="1772.2622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="117" x="215" y="1771.4058">[Security Service]</text><polygon fill="#181818" points="1398.5,1823.7266,1408.5,1827.7266,1398.5,1831.7266,1402.5,1827.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="165" x2="1404.5" y1="1827.7266" y2="1827.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="172" y="1792.395">Request token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="176" y="1807.5278">for service with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="176" y="1822.6606">AccessTokenReq</text><polygon fill="#181818" points="1122,1852.8594,1112,1856.8594,1122,1860.8594,1118,1856.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1116" x2="1409.5" y1="1856.8594" y2="1856.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1128" y="1851.7935">Is invoker registered?</text><polygon fill="#181818" points="1398.5,1881.9922,1408.5,1885.9922,1398.5,1889.9922,1402.5,1885.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1111" x2="1404.5" y1="1885.9922" y2="1885.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="1118" y="1880.9263">Ok</text><polygon fill="#181818" points="1122,1911.125,1112,1915.125,1122,1919.125,1118,1915.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1116" x2="1409.5" y1="1915.125" y2="1915.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="1128" y="1910.0591">Is secret valid?</text><polygon fill="#181818" points="1398.5,1940.2578,1408.5,1944.2578,1398.5,1948.2578,1402.5,1944.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1111" x2="1404.5" y1="1944.2578" y2="1944.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="1118" y="1939.1919">Ok</text><polygon fill="#181818" points="673,1984.5234,663,1988.5234,673,1992.5234,669,1988.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="667" x2="1409.5" y1="1988.5234" y2="1988.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="679" y="1968.3247">Is function providing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="683" y="1983.4575">service registered?</text><polygon fill="#181818" points="1398.5,2013.6563,1408.5,2017.6563,1398.5,2021.6563,1402.5,2017.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="662" x2="1404.5" y1="2017.6563" y2="2017.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="669" y="2012.5903">Ok</text><polygon fill="#181818" points="957,2042.7891,947,2046.7891,957,2050.7891,953,2046.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="951" x2="1409.5" y1="2046.7891" y2="2046.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="963" y="2041.7231">Is service published?</text><polygon fill="#181818" points="1398.5,2071.9219,1408.5,2075.9219,1398.5,2079.9219,1402.5,2075.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="946" x2="1404.5" y1="2075.9219" y2="2075.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="953" y="2070.856">Ok</text><polygon fill="#181818" points="176,2116.1875,166,2120.1875,176,2124.1875,172,2120.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="170" x2="1409.5" y1="2120.1875" y2="2120.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="182" y="2099.9888">AccessTokenRsp with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="186" y="2115.1216">token</text><path d="M134,2142.1875 L200,2142.1875 L200,2149.3203 L190,2159.3203 L134,2159.3203 L134,2142.1875 " fill="#FFA500" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="117.5313" style="stroke:#000000;stroke-width:1.5;" width="1555" x="134" y="2142.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="149" y="2155.2544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99" x="215" y="2154.3979">[Event Service]</text><polygon fill="#181818" points="1523,2176.4531,1533,2180.4531,1523,2184.4531,1527,2180.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="165" x2="1529" y1="2180.4531" y2="2180.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270" x="172" y="2175.3872">Subscribe to event with EventSubscription</text><line style="stroke:#181818;stroke-width:1.0;" x1="1535" x2="1577" y1="2209.5859" y2="2209.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="1577" x2="1577" y1="2209.5859" y2="2222.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="1536" x2="1577" y1="2222.5859" y2="2222.5859"/><polygon fill="#181818" points="1546,2218.5859,1536,2222.5859,1546,2226.5859,1542,2222.5859" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1542" y="2204.52">Create subscriptionId</text><polygon fill="#181818" points="176,2247.7188,166,2251.7188,176,2255.7188,172,2251.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="170" x2="1534" y1="2251.7188" y2="2251.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="182" y="2246.6528">subscriptionId</text><!--MD5=[8e33c6ccfa140fdff05ada05018640a7]
@startuml
actor rAppCatalogue
actor rApp
participant rAppManager
box "CAPIF Internal"
participant capifcore
participant providermanager
participant helmmanager
participant publishservice
participant invokerservice
participant discoverservice
participant securityservice
participant eventservice
end box

alt Regtister rApp as both provider and consumer
    rAppCatalogue->rAppManager: Register rApp, with rApp\n descriptor specifying which\n services to expose and consume
    alt#paleGreen #paleGreen Provider Enrolment
        rAppManager->capifcore: Register provider with\n APIProviderEnrolmentDetails
        capifcore->providermanager:Register provider
        providermanager->providermanager: Create apiProvDomId\n and apiProvFuncIds\n for provided functions
        providermanager->capifcore: Provider with\n apfId and aefIds
        capifcore->rAppManager: Provider with\n apfId and aefIds
    end
    alt#LightBlue #LightBlue Publish Service
        rAppManager->capifcore: Publish services\n with providerId\n andServiceAPIDescription
        capifcore->publishservice: Publish services
        publishservice->providermanager: Are AEFs registered\n for provider?
        providermanager->publishservice: Ok
        publishservice->publishservice: Create apiId
        publishservice->helmmanager: Install chart
        note right: Optional and not decided yet
        helmmanager->publishservice: Ok
        alt#Orange #Orange Subcribed Event Handling
            publishservice->eventservice: Service published
            eventservice->rApp: CAPIFEventDetail
        end
        publishservice->capifcore: ServiceAPIDescription\n with apiId
        capifcore->rAppManager: ServiceAPIDescription\n with apiId
    end
    alt#coral #coral Register Invoker
        rAppManager->capifcore: Register invoker with\n APIInvokerEnrolmentDetails
        capifcore->invokerservice: Register invoker
        invokerservice->invokerservice: Create apiInvokerId and\n onboardingSecret
        invokerservice->publishservice: Get available services
        publishservice->invokerservice: Available services
        alt#Orange #Orange Subcribed Event Handling
            invokerservice->eventservice: Invoker registered
            eventservice->rApp: CAPIFEventDetail
        end
        invokerservice->capifcore: Services available\n for the invoker
        capifcore->rAppManager: Invoker with invokerId\n and available services
    end
    rAppManager->rAppCatalogue: Ok
end
alt#Yellow #Yellow Discover Services
    rApp->capifcore: Discover services for an\n invoker with apiInvokerId\n and filter parameters
    capifcore->discoverservice: Get services available\n for the invoker
    discoverservice->invokerservice: Get services available\n for the invoker
    invokerservice->publishservice: Get available services
    publishservice->invokerservice: Available services
    invokerservice->discoverservice: Services available \nfor the invoker
    discoverservice->capifcore: Services available for the\n invoker matching the\n filter parameters
    capifcore->rApp: Services available for the\n invoker and matching the\n filter parameters
end

alt#Pink #Pink Security Service
    rApp->securityservice: Request token\n for service with\n AccessTokenReq
    securityservice->invokerservice: Is invoker registered?
    invokerservice->securityservice: Ok
    securityservice->invokerservice: Is secret valid?
    invokerservice->securityservice: Ok
    securityservice->providermanager: Is function providing\n service registered?
    providermanager->securityservice: Ok
    securityservice->publishservice: Is service published?
    publishservice->securityservice: Ok
    securityservice->rApp: AccessTokenRsp with\n token
end

alt#Orange #Orange Event Service
    rApp->eventservice: Subscribe to event with EventSubscription
    eventservice->eventservice: Create subscriptionId
    eventservice->rApp: subscriptionId
end
@enduml

PlantUML version 1.2022.14beta7(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>