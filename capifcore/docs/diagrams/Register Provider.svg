<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1503px" preserveAspectRatio="none" style="width:1371px;height:1503px;background:#FFFFFF;" version="1.1" viewBox="0 0 1371 1503" width="1371px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="1491.6328" style="stroke:#181818;stroke-width:0.5;" width="874" x="485" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="109" x="867.5" y="18.0669">CAPIF Internal</text><rect fill="#98FB98" height="221.1953" style="stroke:#000000;stroke-width:1.5;" width="544.5" x="236.5" y="157.6953"/><rect fill="#ADD8E6" height="343.7266" style="stroke:#000000;stroke-width:1.5;" width="827" x="236.5" y="392.8906"/><rect fill="#FF7F50" height="294.5938" style="stroke:#000000;stroke-width:1.5;" width="960.5" x="236.5" y="750.6172"/><rect fill="#FFFF00" height="312.9922" style="stroke:#000000;stroke-width:1.5;" width="1128.5" x="236.5" y="1088.3438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="62" x2="62" y1="81.2969" y2="1418.3359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="301.5" x2="301.5" y1="81.2969" y2="1418.3359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="530" x2="530" y1="81.2969" y2="1418.3359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="702" x2="702" y1="81.2969" y2="1418.3359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="837" x2="837" y1="81.2969" y2="1418.3359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="962" x2="962" y1="81.2969" y2="1418.3359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1127" x2="1127" y1="81.2969" y2="1418.3359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1292" x2="1292" y1="81.2969" y2="1418.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="5" y="77.9951">rAppCatalogue</text><ellipse cx="62" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M62,21.5 L62,48.5 M49,29.5 L75,29.5 M62,48.5 L49,63.5 M62,48.5 L75,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="5" y="1430.3311">rAppCatalogue</text><ellipse cx="62" cy="1442.1328" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M62,1450.1328 L62,1477.1328 M49,1458.1328 L75,1458.1328 M62,1477.1328 L49,1492.1328 M62,1477.1328 L75,1492.1328 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="246.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="253.5" y="69.9951">rAppManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="246.5" y="1417.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="253.5" y="1437.3311">rAppManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="489" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="496" y="69.9951">capifcore</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="489" y="1417.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="496" y="1437.3311">capifcore</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="633" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="640" y="69.9951">providermanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="633" y="1417.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="640" y="1437.3311">providermanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="781" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="788" y="69.9951">helmmanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="781" y="1417.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="788" y="1437.3311">helmmanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="904" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="911" y="69.9951">publishservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="904" y="1417.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="911" y="1437.3311">publishservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1068" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1075" y="69.9951">invokerservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1068" y="1417.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1075" y="1437.3311">invokerservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1230" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1237" y="69.9951">discoverservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1230" y="1417.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1237" y="1437.3311">discoverservice</text><polygon fill="#181818" points="290,138.6953,300,142.6953,290,146.6953,294,142.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="62" x2="296" y1="142.6953" y2="142.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="69" y="107.3638">Start rApp, with rApp</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="73" y="122.4966">descriptor specifying which</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="73" y="137.6294">services to expose and consume</text><path d="M236.5,157.6953 L302.5,157.6953 L302.5,164.8281 L292.5,174.8281 L236.5,174.8281 L236.5,157.6953 " fill="#98FB98" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="221.1953" style="stroke:#000000;stroke-width:1.5;" width="544.5" x="236.5" y="157.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="251.5" y="170.7622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="140" x="317.5" y="169.9058">[Provider Enrolment]</text><polygon fill="#181818" points="518,207.0938,528,211.0938,518,215.0938,522,211.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="524" y1="211.0938" y2="211.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="309" y="190.895">Register provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="313" y="206.0278">APIProviderEnrolmentDetails</text><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="572" y1="270.4922" y2="270.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="572" x2="572" y1="270.4922" y2="283.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="531" x2="572" y1="283.4922" y2="283.4922"/><polygon fill="#181818" points="541,279.4922,531,283.4922,541,287.4922,537,283.4922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="537" y="235.1606">Create apiProvDomId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="541" y="250.2935">and apiProvFuncIds</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="541" y="265.4263">for provided functions</text><polygon fill="#181818" points="690,308.625,700,312.625,690,316.625,694,312.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="696" y1="312.625" y2="312.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="537" y="307.5591">Store provider</text><polygon fill="#181818" points="541,337.7578,531,341.7578,541,345.7578,537,341.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="535" x2="701" y1="341.7578" y2="341.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="547" y="336.6919">Ok</text><polygon fill="#181818" points="313,366.8906,303,370.8906,313,374.8906,309,370.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="529" y1="370.8906" y2="370.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="319" y="365.8247">Provider with apfId and aefIds</text><path d="M236.5,392.8906 L302.5,392.8906 L302.5,400.0234 L292.5,410.0234 L236.5,410.0234 L236.5,392.8906 " fill="#ADD8E6" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="343.7266" style="stroke:#000000;stroke-width:1.5;" width="827" x="236.5" y="392.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="251.5" y="405.9575">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="317.5" y="405.1011">[Publish Service]</text><polygon fill="#181818" points="518,457.4219,528,461.4219,518,465.4219,522,461.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="524" y1="461.4219" y2="461.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="309" y="426.0903">Publish services</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="313" y="441.2231">with providerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="313" y="456.356">andServiceAPIDescription</text><polygon fill="#181818" points="690,501.6875,700,505.6875,690,509.6875,694,505.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="696" y1="505.6875" y2="505.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="537" y="485.4888">Check that AEFs are</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="541" y="500.6216">registered for provider</text><polygon fill="#181818" points="541,530.8203,531,534.8203,541,538.8203,537,534.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="535" x2="701" y1="534.8203" y2="534.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="547" y="529.7544">Ok</text><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="572" y1="563.9531" y2="563.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="572" x2="572" y1="563.9531" y2="576.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="531" x2="572" y1="576.9531" y2="576.9531"/><polygon fill="#181818" points="541,572.9531,531,576.9531,541,580.9531,537,576.9531" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="537" y="558.8872">Create apiId</text><polygon fill="#181818" points="825.5,605.0859,835.5,609.0859,825.5,613.0859,829.5,609.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="831.5" y1="609.0859" y2="609.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="537" y="604.02">Install and start chart</text><path d="M842,589.9531 L842,614.9531 L1048,614.9531 L1048,599.9531 L1038,589.9531 L842,589.9531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1038,589.9531 L1038,599.9531 L1048,599.9531 L1038,589.9531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="848" y="607.02">Optional and not decided yet</text><polygon fill="#181818" points="541,637.2188,531,641.2188,541,645.2188,537,641.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="535" x2="836.5" y1="641.2188" y2="641.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="547" y="636.1528">Ok</text><polygon fill="#181818" points="950.5,666.3516,960.5,670.3516,950.5,674.3516,954.5,670.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="956.5" y1="670.3516" y2="670.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="537" y="665.2856">Store published services</text><polygon fill="#181818" points="541,695.4844,531,699.4844,541,703.4844,537,699.4844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="535" x2="961.5" y1="699.4844" y2="699.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="547" y="694.4185">Ok</text><polygon fill="#181818" points="313,724.6172,303,728.6172,313,732.6172,309,728.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="529" y1="728.6172" y2="728.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="319" y="723.5513">ServiceAPIDescription with apiId</text><path d="M236.5,750.6172 L302.5,750.6172 L302.5,757.75 L292.5,767.75 L236.5,767.75 L236.5,750.6172 " fill="#FF7F50" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="294.5938" style="stroke:#000000;stroke-width:1.5;" width="960.5" x="236.5" y="750.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="251.5" y="763.6841">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="119" x="317.5" y="762.8276">[Register Invoker]</text><polygon fill="#181818" points="518,800.0156,528,804.0156,518,808.0156,522,804.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="524" y1="804.0156" y2="804.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="309" y="783.8169">Register invoker with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="313" y="798.9497">APIInvokerEnrolmentDetails</text><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="572" y1="833.1484" y2="833.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="572" x2="572" y1="833.1484" y2="846.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="531" x2="572" y1="846.1484" y2="846.1484"/><polygon fill="#181818" points="541,842.1484,531,846.1484,541,850.1484,537,846.1484" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="537" y="828.0825">Create apiInvokerId</text><polygon fill="#181818" points="1115.5,871.2813,1125.5,875.2813,1115.5,879.2813,1119.5,875.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="1121.5" y1="875.2813" y2="875.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="537" y="870.2153">Get available services for the invoker</text><polygon fill="#181818" points="973.5,915.5469,963.5,919.5469,973.5,923.5469,969.5,919.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="967.5" x2="1126.5" y1="919.5469" y2="919.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="979.5" y="899.3481">Get services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="983.5" y="914.481">for the invoker</text><polygon fill="#181818" points="1115.5,959.8125,1125.5,963.8125,1115.5,967.8125,1119.5,963.8125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="962.5" x2="1121.5" y1="963.8125" y2="963.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="969.5" y="943.6138">Services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="969.5" y="958.7466">for the invoker</text><polygon fill="#181818" points="541,988.9453,531,992.9453,541,996.9453,537,992.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="535" x2="1126.5" y1="992.9453" y2="992.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="547" y="987.8794">Services available for the invoker</text><polygon fill="#181818" points="313,1033.2109,303,1037.2109,313,1041.2109,309,1037.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="529" y1="1037.2109" y2="1037.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="319" y="1017.0122">Invoker with invokerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="323" y="1032.145">and available services</text><polygon fill="#181818" points="73,1069.3438,63,1073.3438,73,1077.3438,69,1073.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="67" x2="301" y1="1073.3438" y2="1073.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="79" y="1068.2778">Ok</text><path d="M236.5,1088.3438 L302.5,1088.3438 L302.5,1095.4766 L292.5,1105.4766 L236.5,1105.4766 L236.5,1088.3438 " fill="#FFFF00" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="312.9922" style="stroke:#000000;stroke-width:1.5;" width="1128.5" x="236.5" y="1088.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="251.5" y="1101.4106">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126" x="317.5" y="1100.5542">[Discover Services]</text><polygon fill="#181818" points="518,1152.875,528,1156.875,518,1160.875,522,1156.875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="524" y1="1156.875" y2="1156.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="309" y="1121.5435">Discover services for an</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="313" y="1136.6763">invoker with apiInvokerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="313" y="1151.8091">and filter parameters</text><polygon fill="#181818" points="1280.5,1182.0078,1290.5,1186.0078,1280.5,1190.0078,1284.5,1186.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="1286.5" y1="1186.0078" y2="1186.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="537" y="1180.9419">Get services available for the invoker</text><polygon fill="#181818" points="1138.5,1226.2734,1128.5,1230.2734,1138.5,1234.2734,1134.5,1230.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1132.5" x2="1291.5" y1="1230.2734" y2="1230.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="1144.5" y="1210.0747">Get services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1148.5" y="1225.2075">for the invoker</text><polygon fill="#181818" points="1280.5,1270.5391,1290.5,1274.5391,1280.5,1278.5391,1284.5,1274.5391" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1127.5" x2="1286.5" y1="1274.5391" y2="1274.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="1134.5" y="1254.3403">Services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1134.5" y="1269.4731">for the invoker</text><polygon fill="#181818" points="541,1329.9375,531,1333.9375,541,1337.9375,537,1333.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="535" x2="1291.5" y1="1333.9375" y2="1333.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="547" y="1298.606">Services available for the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="551" y="1313.7388">invoker matching the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="551" y="1328.8716">filter parameters</text><polygon fill="#181818" points="313,1389.3359,303,1393.3359,313,1397.3359,309,1393.3359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="529" y1="1393.3359" y2="1393.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="319" y="1358.0044">Services available for the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="323" y="1373.1372">invoker and matching the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="323" y="1388.27">filter parameters</text><!--MD5=[76a893ecfb7d60aefd6563716ccc7a7c]
@startuml
actor rAppCatalogue
participant rAppManager
box "CAPIF Internal"
participant capifcore
participant providermanager
participant helmmanager
participant publishservice
participant invokerservice
participant discoverservice
end box

rAppCatalogue->rAppManager: Start rApp, with rApp\n descriptor specifying which\n services to expose and consume
alt#paleGreen #paleGreen Provider Enrolment
    rAppManager->capifcore: Register provider with\n APIProviderEnrolmentDetails
    capifcore->capifcore: Create apiProvDomId\n and apiProvFuncIds\n for provided functions
    capifcore->providermanager:Store provider
    providermanager->capifcore: Ok
    capifcore->rAppManager: Provider with apfId and aefIds
end
alt#LightBlue #LightBlue Publish Service
    rAppManager->capifcore: Publish services\n with providerId\n andServiceAPIDescription
    capifcore->providermanager: Check that AEFs are\n registered for provider
    providermanager->capifcore: Ok
    capifcore->capifcore: Create apiId
    capifcore->helmmanager: Install and start chart
    note right: Optional and not decided yet
    helmmanager->capifcore: Ok
    capifcore->publishservice: Store published services
    publishservice->capifcore: Ok
    capifcore->rAppManager: ServiceAPIDescription with apiId
end
alt#coral #coral Register Invoker
    rAppManager->capifcore: Register invoker with\n APIInvokerEnrolmentDetails
    capifcore->capifcore: Create apiInvokerId
    capifcore->invokerservice:Get available services for the invoker
    invokerservice->publishservice: Get services available\n for the invoker
    publishservice->invokerservice: Services available \nfor the invoker
    invokerservice->capifcore: Services available for the invoker
    capifcore->rAppManager: Invoker with invokerId\n and available services
end
rAppManager->rAppCatalogue: Ok

alt#Yellow #Yellow Discover Services
    rAppManager->capifcore: Discover services for an\n invoker with apiInvokerId\n and filter parameters
    capifcore->discoverservice: Get services available for the invoker
    discoverservice->invokerservice: Get services available\n for the invoker
    invokerservice->discoverservice: Services available \nfor the invoker
    discoverservice->capifcore: Services available for the\n invoker matching the\n filter parameters
    capifcore->rAppManager: Services available for the\n invoker and matching the\n filter parameters
end
@enduml

PlantUML version 1.2022.14beta6(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>