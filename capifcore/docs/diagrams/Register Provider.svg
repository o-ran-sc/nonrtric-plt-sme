<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="858px" preserveAspectRatio="none" style="width:1069px;height:858px;background:#FFFFFF;" version="1.1" viewBox="0 0 1069 858" width="1069px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="846.0469" style="stroke:#181818;stroke-width:0.5;" width="540" x="485" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="109" x="700.5" y="18.0669">CAPIF Internal</text><rect fill="#98FB98" height="119.6641" style="stroke:#000000;stroke-width:1.5;" width="544.5" x="236.5" y="157.6953"/><rect fill="#ADD8E6" height="257.3281" style="stroke:#000000;stroke-width:1.5;" width="827" x="236.5" y="291.3594"/><rect fill="#FF7F50" height="163.9297" style="stroke:#000000;stroke-width:1.5;" width="794.5" x="236.5" y="562.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="62" x2="62" y1="81.2969" y2="772.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="301.5" x2="301.5" y1="81.2969" y2="772.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="530" x2="530" y1="81.2969" y2="772.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="702" x2="702" y1="81.2969" y2="772.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="837" x2="837" y1="81.2969" y2="772.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="962" x2="962" y1="81.2969" y2="772.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="5" y="77.9951">rAppCatalogue</text><ellipse cx="62" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M62,21.5 L62,48.5 M49,29.5 L75,29.5 M62,48.5 L49,63.5 M62,48.5 L75,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="5" y="784.7451">rAppCatalogue</text><ellipse cx="62" cy="796.5469" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M62,804.5469 L62,831.5469 M49,812.5469 L75,812.5469 M62,831.5469 L49,846.5469 M62,831.5469 L75,846.5469 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="246.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="253.5" y="69.9951">rAppManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="246.5" y="771.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="253.5" y="791.7451">rAppManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="489" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="496" y="69.9951">capifcore</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="489" y="771.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="496" y="791.7451">capifcore</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="633" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="640" y="69.9951">providermanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="633" y="771.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="640" y="791.7451">providermanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="781" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="788" y="69.9951">helmmanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="781" y="771.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="788" y="791.7451">helmmanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="904" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="911" y="69.9951">publishservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="904" y="771.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="911" y="791.7451">publishservice</text><polygon fill="#181818" points="290,138.6953,300,142.6953,290,146.6953,294,142.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="62" x2="296" y1="142.6953" y2="142.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="69" y="107.3638">Start rApp, with rApp</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="73" y="122.4966">descriptor specifying which</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="73" y="137.6294">services to expose and consume</text><path d="M236.5,157.6953 L302.5,157.6953 L302.5,164.8281 L292.5,174.8281 L236.5,174.8281 L236.5,157.6953 " fill="#98FB98" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="119.6641" style="stroke:#000000;stroke-width:1.5;" width="544.5" x="236.5" y="157.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="251.5" y="170.7622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="140" x="317.5" y="169.9058">[Provider Enrolment]</text><polygon fill="#181818" points="518,207.0938,528,211.0938,518,215.0938,522,211.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="524" y1="211.0938" y2="211.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="309" y="190.895">Register provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="313" y="206.0278">APIProviderEnrolmentDetails</text><polygon fill="#181818" points="690,236.2266,700,240.2266,690,244.2266,694,240.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="696" y1="240.2266" y2="240.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="537" y="235.1606">Store provider</text><polygon fill="#181818" points="313,265.3594,303,269.3594,313,273.3594,309,269.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="529" y1="269.3594" y2="269.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="319" y="264.2935">Provider with apfId and aefIds</text><path d="M236.5,291.3594 L302.5,291.3594 L302.5,298.4922 L292.5,308.4922 L236.5,308.4922 L236.5,291.3594 " fill="#ADD8E6" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="257.3281" style="stroke:#000000;stroke-width:1.5;" width="827" x="236.5" y="291.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="251.5" y="304.4263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="317.5" y="303.5698">[Publish Service]</text><polygon fill="#181818" points="518,340.7578,528,344.7578,518,348.7578,522,344.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="524" y1="344.7578" y2="344.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="309" y="324.5591">Publish services</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="313" y="339.6919">with ServiceAPIDescription</text><polygon fill="#181818" points="690,385.0234,700,389.0234,690,393.0234,694,389.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="696" y1="389.0234" y2="389.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="537" y="368.8247">Check that AEFs are</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="541" y="383.9575">registered for provider</text><polygon fill="#181818" points="541,414.1563,531,418.1563,541,422.1563,537,418.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="535" x2="701" y1="418.1563" y2="418.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="547" y="413.0903">Ok</text><polygon fill="#181818" points="825.5,446.2891,835.5,450.2891,825.5,454.2891,829.5,450.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="831.5" y1="450.2891" y2="450.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="537" y="445.2231">Install and start chart</text><path d="M842,431.1563 L842,456.1563 L1048,456.1563 L1048,441.1563 L1038,431.1563 L842,431.1563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1038,431.1563 L1038,441.1563 L1048,441.1563 L1038,431.1563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="848" y="448.2231">Optional and not decided yet</text><polygon fill="#181818" points="541,478.4219,531,482.4219,541,486.4219,537,482.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="535" x2="836.5" y1="482.4219" y2="482.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="547" y="477.356">Ok</text><polygon fill="#181818" points="950.5,507.5547,960.5,511.5547,950.5,515.5547,954.5,511.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="956.5" y1="511.5547" y2="511.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="537" y="506.4888">Store published services</text><polygon fill="#181818" points="313,536.6875,303,540.6875,313,544.6875,309,540.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="529" y1="540.6875" y2="540.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="319" y="535.6216">ServiceAPIDescription with apiId</text><path d="M236.5,562.6875 L302.5,562.6875 L302.5,569.8203 L292.5,579.8203 L236.5,579.8203 L236.5,562.6875 " fill="#FF7F50" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="163.9297" style="stroke:#000000;stroke-width:1.5;" width="794.5" x="236.5" y="562.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="251.5" y="575.7544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="119" x="317.5" y="574.8979">[Register Invoker]</text><polygon fill="#181818" points="518,612.0859,528,616.0859,518,620.0859,522,616.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="524" y1="616.0859" y2="616.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="309" y="595.8872">Register invoker with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="313" y="611.02">APIInvokerEnrolmentDetails</text><polygon fill="#181818" points="950.5,641.2188,960.5,645.2188,950.5,649.2188,954.5,645.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="530" x2="956.5" y1="645.2188" y2="645.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="537" y="640.1528">Get available services for invoker</text><polygon fill="#181818" points="541,670.3516,531,674.3516,541,678.3516,537,674.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="535" x2="961.5" y1="674.3516" y2="674.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252" x="547" y="669.2856">Services available for the given invoker</text><polygon fill="#181818" points="313,714.6172,303,718.6172,313,722.6172,309,718.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="529" y1="718.6172" y2="718.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="319" y="698.4185">Invoker with invokerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="323" y="713.5513">and avialable services</text><polygon fill="#181818" points="73,750.75,63,754.75,73,758.75,69,754.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="67" x2="301" y1="754.75" y2="754.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="79" y="749.6841">Ok</text><!--MD5=[ba6e1aec74d2a2fd3fda4119bb07c2f6]
@startuml
actor rAppCatalogue
participant rAppManager
box "CAPIF Internal"
participant capifcore
participant providermanager
participant helmmanager
participant publishservice
end box

rAppCatalogue->rAppManager: Start rApp, with rApp\n descriptor specifying which\n services to expose and consume
alt#paleGreen #paleGreen Provider Enrolment
    rAppManager->capifcore: Register provider with\n APIProviderEnrolmentDetails
    capifcore->providermanager:Store provider
    capifcore->rAppManager: Provider with apfId and aefIds
end
alt#LightBlue #LightBlue Publish Service
    rAppManager->capifcore: Publish services\n with ServiceAPIDescription
    capifcore->providermanager: Check that AEFs are\n registered for provider
    providermanager->capifcore: Ok
    capifcore->helmmanager: Install and start chart
    note right: Optional and not decided yet
    helmmanager->capifcore: Ok
    capifcore->publishservice: Store published services
    capifcore->rAppManager: ServiceAPIDescription with apiId
end
alt#coral #coral Register Invoker
    rAppManager->capifcore: Register invoker with\n APIInvokerEnrolmentDetails
    capifcore->publishservice:Get available services for invoker
    publishservice->capifcore: Services available for the given invoker
    capifcore->rAppManager: Invoker with invokerId\n and avialable services
end
rAppManager->rAppCatalogue: Ok
@enduml

PlantUML version 1.2022.14beta4(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>