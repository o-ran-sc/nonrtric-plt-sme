<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2706px" preserveAspectRatio="none" style="width:1847px;height:2706px;background:#FFFFFF;" version="1.1" viewBox="0 0 1847 2706" width="1847px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="2694.1406" style="stroke:#181818;stroke-width:0.5;" width="1264" x="561" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="109" x="1138.5" y="18.0669">CAPIF Internal</text><rect fill="none" height="590.0547" style="stroke:#000000;stroke-width:1.5;" width="1767" x="10" y="98.2969"/><rect fill="#FF7F50" height="294.5938" style="stroke:#000000;stroke-width:1.5;" width="1199.5" x="160.5" y="166.6953"/><rect fill="#FFA500" height="132.6641" style="stroke:#000000;stroke-width:1.5;" width="1471" x="296" y="548.6875"/><rect fill="none" height="923.0469" style="stroke:#000000;stroke-width:1.5;" width="1686.5" x="10" y="702.3516"/><rect fill="#98FB98" height="251.4609" style="stroke:#000000;stroke-width:1.5;" width="743.5" x="160.5" y="801.0156"/><rect fill="#ADD8E6" height="463.3906" style="stroke:#000000;stroke-width:1.5;" width="1526" x="160.5" y="1066.4766"/><rect fill="#FFA500" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1380.5" x="296" y="1358.9375"/><rect fill="#FFFF00" height="386.3906" style="stroke:#000000;stroke-width:1.5;" width="1131.5" x="296" y="1639.3984"/><rect fill="none" height="564.0547" style="stroke:#000000;stroke-width:1.5;" width="1555" x="286" y="2039.7891"/><rect fill="#FFC0CB" height="368.9922" style="stroke:#000000;stroke-width:1.5;" width="1263.5" x="296" y="2063.9219"/><rect fill="#C0C0C0" height="61.3984" style="stroke:#000000;stroke-width:1.5;" width="1401" x="430" y="2491.1797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="77" x2="77" y1="81.2969" y2="2620.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="225.5" x2="225.5" y1="81.2969" y2="2620.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="368" x2="368" y1="81.2969" y2="2620.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="497" x2="497" y1="81.2969" y2="2620.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="606" x2="606" y1="81.2969" y2="2620.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="740" x2="740" y1="81.2969" y2="2620.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="898.5" x2="898.5" y1="81.2969" y2="2620.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1023.5" x2="1023.5" y1="81.2969" y2="2620.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1188.5" x2="1188.5" y1="81.2969" y2="2620.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1354.5" x2="1354.5" y1="81.2969" y2="2620.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1488.5" x2="1488.5" y1="81.2969" y2="2620.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1612.5" x2="1612.5" y1="81.2969" y2="2620.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1762" x2="1762" y1="81.2969" y2="2620.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="20" y="77.9951">rAppCatalogue</text><ellipse cx="77" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M77,21.5 L77,48.5 M64,29.5 L90,29.5 M77,48.5 L64,63.5 M77,48.5 L90,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="20" y="2632.8389">rAppCatalogue</text><ellipse cx="77" cy="2644.6406" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M77,2652.6406 L77,2679.6406 M64,2660.6406 L90,2660.6406 M77,2679.6406 L64,2694.6406 M77,2679.6406 L90,2694.6406 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="170.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="177.5" y="69.9951">rAppManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="170.5" y="2619.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="177.5" y="2639.8389">rAppManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124" x="306" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="313" y="69.9951">consumer rApp</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124" x="306" y="2619.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="313" y="2639.8389">consumer rApp</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="440" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="447" y="69.9951">provider rApp</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="440" y="2619.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="447" y="2639.8389">provider rApp</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="565" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="572" y="69.9951">capifcore</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="565" y="2619.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="572" y="2639.8389">capifcore</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="671" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="678" y="69.9951">providermanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="671" y="2619.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="678" y="2639.8389">providermanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="842.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="849.5" y="69.9951">helmmanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="842.5" y="2619.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="849.5" y="2639.8389">helmmanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="965.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="972.5" y="69.9951">publishservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="965.5" y="2619.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="972.5" y="2639.8389">publishservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1129.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1136.5" y="69.9951">invokerservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1129.5" y="2619.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1136.5" y="2639.8389">invokerservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1292.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1299.5" y="69.9951">discoverservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1292.5" y="2619.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1299.5" y="2639.8389">discoverservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1427.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1434.5" y="69.9951">securityservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1427.5" y="2619.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1434.5" y="2639.8389">securityservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1559.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1566.5" y="69.9951">eventservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1559.5" y="2619.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1566.5" y="2639.8389">eventservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="1703" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1710" y="69.9951">loggingservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="1703" y="2619.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1710" y="2639.8389">loggingservice</text><path d="M10,98.2969 L76,98.2969 L76,105.4297 L66,115.4297 L10,115.4297 L10,98.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="590.0547" style="stroke:#000000;stroke-width:1.5;" width="1767" x="10" y="98.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="111.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="179" x="91" y="110.5073">[Regtister Consumer rApp]</text><polygon fill="#181818" points="214,147.6953,224,151.6953,214,155.6953,218,151.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="77" x2="220" y1="151.6953" y2="151.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="84" y="131.4966">Register consumer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="84" y="146.6294">rApp</text><path d="M160.5,166.6953 L226.5,166.6953 L226.5,173.8281 L216.5,183.8281 L160.5,183.8281 L160.5,166.6953 " fill="#FF7F50" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="294.5938" style="stroke:#000000;stroke-width:1.5;" width="1199.5" x="160.5" y="166.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="175.5" y="179.7622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="119" x="241.5" y="178.9058">[Register Invoker]</text><polygon fill="#181818" points="594,216.0938,604,220.0938,594,224.0938,598,220.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="226" x2="600" y1="220.0938" y2="220.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="233" y="199.895">Register invoker with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="237" y="215.0278">APIInvokerEnrolmentDetails</text><polygon fill="#181818" points="1177,245.2266,1187,249.2266,1177,253.2266,1181,249.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="606" x2="1183" y1="249.2266" y2="249.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="613" y="244.1606">Register invoker</text><line style="stroke:#181818;stroke-width:1.0;" x1="1189" x2="1231" y1="293.4922" y2="293.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="1231" x2="1231" y1="293.4922" y2="306.4922"/><line style="stroke:#181818;stroke-width:1.0;" x1="1190" x2="1231" y1="306.4922" y2="306.4922"/><polygon fill="#181818" points="1200,302.4922,1190,306.4922,1200,310.4922,1196,306.4922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="1196" y="273.2935">Create apiInvokerId and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="1200" y="288.4263">onboardingSecret</text><polygon fill="#181818" points="1035,331.625,1025,335.625,1035,339.625,1031,335.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1029" x2="1188" y1="335.625" y2="335.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="1041" y="330.5591">Get available services</text><polygon fill="#181818" points="1177,360.7578,1187,364.7578,1177,368.7578,1181,364.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1024" x2="1183" y1="364.7578" y2="364.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="1031" y="359.6919">Available services</text><polygon fill="#181818" points="617,405.0234,607,409.0234,617,413.0234,613,409.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="611" x2="1188" y1="409.0234" y2="409.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="623" y="388.8247">Services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="627" y="403.9575">for the invoker</text><polygon fill="#181818" points="237,449.2891,227,453.2891,237,457.2891,233,453.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="231" x2="605" y1="453.2891" y2="453.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="243" y="433.0903">Invoker with invokerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="247" y="448.2231">and available services</text><polygon fill="#181818" points="356,500.5547,366,504.5547,356,508.5547,360,504.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="226" x2="362" y1="504.5547" y2="504.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="233" y="484.356">invokerId and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="237" y="499.4888">available services</text><polygon fill="#181818" points="88,529.6875,78,533.6875,88,537.6875,84,533.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="82" x2="225" y1="533.6875" y2="533.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="94" y="528.6216">Ok</text><path d="M296,548.6875 L362,548.6875 L362,555.8203 L352,565.8203 L296,565.8203 L296,548.6875 " fill="#FFA500" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="132.6641" style="stroke:#000000;stroke-width:1.5;" width="1471" x="296" y="548.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="311" y="561.7544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="214" x="377" y="560.8979">[Subscribe to publishing events]</text><polygon fill="#181818" points="1601,598.0859,1611,602.0859,1601,606.0859,1605,602.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="368" x2="1607" y1="602.0859" y2="602.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="375" y="581.8872">Subscribe to events</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="379" y="597.02">with EventSubscription</text><line style="stroke:#181818;stroke-width:1.0;" x1="1613" x2="1655" y1="631.2188" y2="631.2188"/><line style="stroke:#181818;stroke-width:1.0;" x1="1655" x2="1655" y1="631.2188" y2="644.2188"/><line style="stroke:#181818;stroke-width:1.0;" x1="1614" x2="1655" y1="644.2188" y2="644.2188"/><polygon fill="#181818" points="1624,640.2188,1614,644.2188,1624,648.2188,1620,644.2188" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1620" y="626.1528">Create subscriptionId</text><polygon fill="#181818" points="379,669.3516,369,673.3516,379,677.3516,375,673.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="373" x2="1612" y1="673.3516" y2="673.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="385" y="668.2856">subscriptionId</text><path d="M10,702.3516 L76,702.3516 L76,709.4844 L66,719.4844 L10,719.4844 L10,702.3516 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="923.0469" style="stroke:#000000;stroke-width:1.5;" width="1686.5" x="10" y="702.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="715.4185">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="168" x="91" y="714.562">[Regtister provider rApp]</text><polygon fill="#181818" points="214,782.0156,224,786.0156,214,790.0156,218,786.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="77" x2="220" y1="786.0156" y2="786.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="84" y="735.5513">Register rApp, with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="88" y="750.6841">rApp descriptor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="88" y="765.8169">specifying which</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="88" y="780.9497">services to expose</text><path d="M160.5,801.0156 L226.5,801.0156 L226.5,808.1484 L216.5,818.1484 L160.5,818.1484 L160.5,801.0156 " fill="#98FB98" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="251.4609" style="stroke:#000000;stroke-width:1.5;" width="743.5" x="160.5" y="801.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="175.5" y="814.0825">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="140" x="241.5" y="813.2261">[Provider Enrolment]</text><polygon fill="#181818" points="594,850.4141,604,854.4141,594,858.4141,598,854.4141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="226" x2="600" y1="854.4141" y2="854.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="233" y="834.2153">Register provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="237" y="849.3481">APIProviderEnrolmentDetails</text><polygon fill="#181818" points="728,879.5469,738,883.5469,728,887.5469,732,883.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="606" x2="734" y1="883.5469" y2="883.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="613" y="878.481">Register provider</text><line style="stroke:#181818;stroke-width:1.0;" x1="740" x2="782" y1="942.9453" y2="942.9453"/><line style="stroke:#181818;stroke-width:1.0;" x1="782" x2="782" y1="942.9453" y2="955.9453"/><line style="stroke:#181818;stroke-width:1.0;" x1="741" x2="782" y1="955.9453" y2="955.9453"/><polygon fill="#181818" points="751,951.9453,741,955.9453,751,959.9453,747,955.9453" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="747" y="907.6138">Create apiProvDomId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="751" y="922.7466">and apiProvFuncIds</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="751" y="937.8794">for provided functions</text><polygon fill="#181818" points="617,996.2109,607,1000.2109,617,1004.2109,613,1000.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="611" x2="739" y1="1000.2109" y2="1000.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="623" y="980.0122">Provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="627" y="995.145">apfId and aefIds</text><polygon fill="#181818" points="237,1040.4766,227,1044.4766,237,1048.4766,233,1044.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="231" x2="605" y1="1044.4766" y2="1044.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="243" y="1024.2778">Provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="247" y="1039.4106">apfId and aefIds</text><path d="M160.5,1066.4766 L226.5,1066.4766 L226.5,1073.6094 L216.5,1083.6094 L160.5,1083.6094 L160.5,1066.4766 " fill="#ADD8E6" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="463.3906" style="stroke:#000000;stroke-width:1.5;" width="1526" x="160.5" y="1066.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="175.5" y="1079.5435">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="241.5" y="1078.687">[Publish Service]</text><polygon fill="#181818" points="594,1131.0078,604,1135.0078,594,1139.0078,598,1135.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="226" x2="600" y1="1135.0078" y2="1135.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="233" y="1099.6763">Publish services</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="237" y="1114.8091">with providerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="237" y="1129.9419">andServiceAPIDescription</text><polygon fill="#181818" points="1012,1160.1406,1022,1164.1406,1012,1168.1406,1016,1164.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="606" x2="1018" y1="1164.1406" y2="1164.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="613" y="1159.0747">Publish services</text><polygon fill="#181818" points="751,1204.4063,741,1208.4063,751,1212.4063,747,1208.4063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="745" x2="1023" y1="1208.4063" y2="1208.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="757" y="1188.2075">Are AEFs registered</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="761" y="1203.3403">for provider?</text><polygon fill="#181818" points="1012,1233.5391,1022,1237.5391,1012,1241.5391,1016,1237.5391" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="740" x2="1018" y1="1237.5391" y2="1237.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="747" y="1232.4731">Ok</text><line style="stroke:#181818;stroke-width:1.0;" x1="1024" x2="1066" y1="1266.6719" y2="1266.6719"/><line style="stroke:#181818;stroke-width:1.0;" x1="1066" x2="1066" y1="1266.6719" y2="1279.6719"/><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1066" y1="1279.6719" y2="1279.6719"/><polygon fill="#181818" points="1035,1275.6719,1025,1279.6719,1035,1283.6719,1031,1279.6719" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1031" y="1261.606">Create apiId</text><polygon fill="#181818" points="910,1307.8047,900,1311.8047,910,1315.8047,906,1311.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="904" x2="1023" y1="1311.8047" y2="1311.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="916" y="1306.7388">Install chart</text><path d="M1029,1292.6719 L1029,1317.6719 L1235,1317.6719 L1235,1302.6719 L1225,1292.6719 L1029,1292.6719 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1225,1292.6719 L1225,1302.6719 L1235,1302.6719 L1225,1292.6719 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="1035" y="1309.7388">Optional and not decided yet</text><polygon fill="#181818" points="1012,1339.9375,1022,1343.9375,1012,1347.9375,1016,1343.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="899" x2="1018" y1="1343.9375" y2="1343.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="906" y="1338.8716">Ok</text><path d="M296,1358.9375 L362,1358.9375 L362,1366.0703 L352,1376.0703 L296,1376.0703 L296,1358.9375 " fill="#FFA500" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1380.5" x="296" y="1358.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="311" y="1372.0044">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="377" y="1371.1479">[Subcribed Event Handling]</text><polygon fill="#181818" points="1601,1393.2031,1611,1397.2031,1601,1401.2031,1605,1397.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1024" x2="1607" y1="1397.2031" y2="1397.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="1031" y="1392.1372">Service published</text><polygon fill="#181818" points="379,1422.3359,369,1426.3359,379,1430.3359,375,1426.3359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="373" x2="1612" y1="1426.3359" y2="1426.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="385" y="1421.27">CAPIFEventDetail</text><polygon fill="#181818" points="617,1473.6016,607,1477.6016,617,1481.6016,613,1477.6016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="611" x2="1023" y1="1477.6016" y2="1477.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="623" y="1457.4028">ServiceAPIDescription</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="627" y="1472.5356">with apiId</text><polygon fill="#181818" points="237,1517.8672,227,1521.8672,237,1525.8672,233,1521.8672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="231" x2="605" y1="1521.8672" y2="1521.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="243" y="1501.6685">ServiceAPIDescription</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="247" y="1516.8013">with apiId</text><polygon fill="#181818" points="485.5,1584.2656,495.5,1588.2656,485.5,1592.2656,489.5,1588.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="226" x2="491.5" y1="1588.2656" y2="1588.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="233" y="1552.9341">apiProvDomId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="237" y="1568.0669">apiProvFuncIds,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="237" y="1583.1997">and apiId</text><polygon fill="#181818" points="88,1613.3984,78,1617.3984,88,1621.3984,84,1617.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="82" x2="225" y1="1617.3984" y2="1617.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="94" y="1612.3325">Ok</text><path d="M296,1639.3984 L362,1639.3984 L362,1646.5313 L352,1656.5313 L296,1656.5313 L296,1639.3984 " fill="#FFFF00" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="386.3906" style="stroke:#000000;stroke-width:1.5;" width="1131.5" x="296" y="1639.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="311" y="1652.4653">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126" x="377" y="1651.6089">[Discover Services]</text><polygon fill="#181818" points="594,1703.9297,604,1707.9297,594,1711.9297,598,1707.9297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="368" x2="600" y1="1707.9297" y2="1707.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="375" y="1672.5981">Discover services</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="379" y="1687.731">with apiInvokerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="379" y="1702.8638">and filter parameters</text><polygon fill="#181818" points="1343,1748.1953,1353,1752.1953,1343,1756.1953,1347,1752.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="606" x2="1349" y1="1752.1953" y2="1752.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="613" y="1731.9966">Get services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="617" y="1747.1294">for the invoker</text><polygon fill="#181818" points="1200,1792.4609,1190,1796.4609,1200,1800.4609,1196,1796.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1194" x2="1354" y1="1796.4609" y2="1796.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="1206" y="1776.2622">Get services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1210" y="1791.395">for the invoker</text><polygon fill="#181818" points="1035,1821.5938,1025,1825.5938,1035,1829.5938,1031,1825.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1029" x2="1188" y1="1825.5938" y2="1825.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="1041" y="1820.5278">Get available services</text><polygon fill="#181818" points="1177,1850.7266,1187,1854.7266,1177,1858.7266,1181,1854.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1024" x2="1183" y1="1854.7266" y2="1854.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="1031" y="1849.6606">Available services</text><polygon fill="#181818" points="1343,1894.9922,1353,1898.9922,1343,1902.9922,1347,1898.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1189" x2="1349" y1="1898.9922" y2="1898.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="1196" y="1878.7935">Services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1196" y="1893.9263">for the invoker</text><polygon fill="#181818" points="617,1954.3906,607,1958.3906,617,1962.3906,613,1958.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="611" x2="1354" y1="1958.3906" y2="1958.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="623" y="1923.0591">Services available for the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="627" y="1938.1919">invoker matching the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="627" y="1953.3247">filter parameters</text><polygon fill="#181818" points="379,2013.7891,369,2017.7891,379,2021.7891,375,2017.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="373" x2="605" y1="2017.7891" y2="2017.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="385" y="1982.4575">Services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="389" y="1997.5903">matching the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="389" y="2012.7231">filter parameters</text><path d="M286,2039.7891 L352,2039.7891 L352,2046.9219 L342,2056.9219 L286,2056.9219 L286,2039.7891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="564.0547" style="stroke:#000000;stroke-width:1.5;" width="1555" x="286" y="2039.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="301" y="2052.856">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="105" x="367" y="2051.9995">[Invoke Service]</text><path d="M296,2063.9219 L362,2063.9219 L362,2071.0547 L352,2081.0547 L296,2081.0547 L296,2063.9219 " fill="#FFC0CB" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="368.9922" style="stroke:#000000;stroke-width:1.5;" width="1263.5" x="296" y="2063.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="311" y="2076.9888">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="117" x="377" y="2076.1323">[Security Service]</text><polygon fill="#181818" points="1476.5,2128.4531,1486.5,2132.4531,1476.5,2136.4531,1480.5,2132.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="368" x2="1482.5" y1="2132.4531" y2="2132.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="375" y="2097.1216">Request token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="379" y="2112.2544">for service with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="379" y="2127.3872">AccessTokenReq</text><polygon fill="#181818" points="1200,2157.5859,1190,2161.5859,1200,2165.5859,1196,2161.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1194" x2="1487.5" y1="2161.5859" y2="2161.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1206" y="2156.52">Is invoker registered?</text><polygon fill="#181818" points="1476.5,2186.7188,1486.5,2190.7188,1476.5,2194.7188,1480.5,2190.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1189" x2="1482.5" y1="2190.7188" y2="2190.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="1196" y="2185.6528">Ok</text><polygon fill="#181818" points="1200,2215.8516,1190,2219.8516,1200,2223.8516,1196,2219.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1194" x2="1487.5" y1="2219.8516" y2="2219.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="1206" y="2214.7856">Is secret valid?</text><polygon fill="#181818" points="1476.5,2244.9844,1486.5,2248.9844,1476.5,2252.9844,1480.5,2248.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1189" x2="1482.5" y1="2248.9844" y2="2248.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="1196" y="2243.9185">Ok</text><polygon fill="#181818" points="751,2289.25,741,2293.25,751,2297.25,747,2293.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="745" x2="1487.5" y1="2293.25" y2="2293.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="757" y="2273.0513">Is function providing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="761" y="2288.1841">service registered?</text><polygon fill="#181818" points="1476.5,2318.3828,1486.5,2322.3828,1476.5,2326.3828,1480.5,2322.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="740" x2="1482.5" y1="2322.3828" y2="2322.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="747" y="2317.3169">Ok</text><polygon fill="#181818" points="1035,2347.5156,1025,2351.5156,1035,2355.5156,1031,2351.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1029" x2="1487.5" y1="2351.5156" y2="2351.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="1041" y="2346.4497">Is service published?</text><polygon fill="#181818" points="1476.5,2376.6484,1486.5,2380.6484,1476.5,2384.6484,1480.5,2380.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1024" x2="1482.5" y1="2380.6484" y2="2380.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="1031" y="2375.5825">Ok</text><polygon fill="#181818" points="379,2420.9141,369,2424.9141,379,2428.9141,375,2424.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="373" x2="1487.5" y1="2424.9141" y2="2424.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="385" y="2404.7153">AccessTokenRsp</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="389" y="2419.8481">with token</text><polygon fill="#181818" points="485.5,2472.1797,495.5,2476.1797,485.5,2480.1797,489.5,2476.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="368" x2="491.5" y1="2476.1797" y2="2476.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="375" y="2455.981">Invoke service</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="379" y="2471.1138">with token</text><path d="M430,2491.1797 L496,2491.1797 L496,2498.3125 L486,2508.3125 L430,2508.3125 L430,2491.1797 " fill="#C0C0C0" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="61.3984" style="stroke:#000000;stroke-width:1.5;" width="1401" x="430" y="2491.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="445" y="2504.2466">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="109" x="511" y="2503.3901">[Log invocation]</text><polygon fill="#181818" points="1750,2540.5781,1760,2544.5781,1750,2548.5781,1754,2544.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="497.5" x2="1756" y1="2544.5781" y2="2544.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="504.5" y="2524.3794">Log invocation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="508.5" y="2539.5122">with InvocationLog</text><polygon fill="#181818" points="379,2591.8438,369,2595.8438,379,2599.8438,375,2595.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="373" x2="496.5" y1="2595.8438" y2="2595.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="385" y="2575.645">Result of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="389" y="2590.7778">invocation</text><!--MD5=[182ac194ef4fff6dad2b923d0b203d64]
@startuml
actor rAppCatalogue
participant rAppManager
participant "consumer rApp" as capp
participant "provider rApp" as papp
box "CAPIF Internal"
participant capifcore
participant providermanager
participant helmmanager
participant publishservice
participant invokerservice
participant discoverservice
participant securityservice
participant eventservice
participant loggingservice
end box

alt Regtister Consumer rApp
    rAppCatalogue->rAppManager: Register consumer \nrApp
    alt#coral #coral Register Invoker
        rAppManager->capifcore: Register invoker with\n APIInvokerEnrolmentDetails
        capifcore->invokerservice: Register invoker
        invokerservice->invokerservice: Create apiInvokerId and\n onboardingSecret
        invokerservice->publishservice: Get available services
        publishservice->invokerservice: Available services
        invokerservice->capifcore: Services available\n for the invoker
        capifcore->rAppManager: Invoker with invokerId\n and available services
    end
    rAppManager->capp: invokerId and\n available services
    rAppManager->rAppCatalogue: Ok
    alt#Orange #Orange Subscribe to publishing events
        capp->eventservice: Subscribe to events\n with EventSubscription
        eventservice->eventservice: Create subscriptionId
        eventservice->capp: subscriptionId
    end
end
alt Regtister provider rApp
    rAppCatalogue->rAppManager: Register rApp, with\n rApp descriptor\n specifying which\n services to expose
    alt#paleGreen #paleGreen Provider Enrolment
        rAppManager->capifcore: Register provider with\n APIProviderEnrolmentDetails
        capifcore->providermanager:Register provider
        providermanager->providermanager: Create apiProvDomId\n and apiProvFuncIds\n for provided functions
        providermanager->capifcore: Provider with\n apfId and aefIds
        capifcore->rAppManager: Provider with\n apfId and aefIds
    end
    alt#LightBlue #LightBlue Publish Service
        rAppManager->capifcore: Publish services\n with providerId\n andServiceAPIDescription
        capifcore->publishservice: Publish services
        publishservice->providermanager: Are AEFs registered\n for provider?
        providermanager->publishservice: Ok
        publishservice->publishservice: Create apiId
        publishservice->helmmanager: Install chart
        note right: Optional and not decided yet
        helmmanager->publishservice: Ok
        alt#Orange #Orange Subcribed Event Handling
            publishservice->eventservice: Service published
            eventservice->capp: CAPIFEventDetail
        end
        publishservice->capifcore: ServiceAPIDescription\n with apiId
        capifcore->rAppManager: ServiceAPIDescription\n with apiId
    end
    rAppManager->papp: apiProvDomId,\n apiProvFuncIds,\n and apiId
    rAppManager->rAppCatalogue: Ok
end
alt#Yellow #Yellow Discover Services
    capp->capifcore: Discover services\n with apiInvokerId\n and filter parameters
    capifcore->discoverservice: Get services available\n for the invoker
    discoverservice->invokerservice: Get services available\n for the invoker
    invokerservice->publishservice: Get available services
    publishservice->invokerservice: Available services
    invokerservice->discoverservice: Services available \nfor the invoker
    discoverservice->capifcore: Services available for the\n invoker matching the\n filter parameters
    capifcore->capp: Services available\n matching the\n filter parameters
end

alt Invoke Service
    alt#Pink #Pink Security Service
        capp->securityservice: Request token\n for service with\n AccessTokenReq
        securityservice->invokerservice: Is invoker registered?
        invokerservice->securityservice: Ok
        securityservice->invokerservice: Is secret valid?
        invokerservice->securityservice: Ok
        securityservice->providermanager: Is function providing\n service registered?
        providermanager->securityservice: Ok
        securityservice->publishservice: Is service published?
        publishservice->securityservice: Ok
        securityservice->capp: AccessTokenRsp\n with token
    end
    capp->papp: Invoke service\n with token
    alt#Silver #Silver Log invocation
        papp->loggingservice: Log invocation\n with InvocationLog
    end
    papp->capp: Result of\n invocation
end
@enduml

PlantUML version 1.2022.14beta7(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>