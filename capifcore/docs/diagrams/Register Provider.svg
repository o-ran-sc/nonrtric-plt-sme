<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2020px" preserveAspectRatio="none" style="width:1472px;height:2020px;background:#FFFFFF;" version="1.1" viewBox="0 0 1472 2020" width="1472px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="2008.5547" style="stroke:#181818;stroke-width:0.5;" width="992.5" x="468" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="109" x="909.75" y="18.0669">CAPIF Internal</text><rect fill="#98FB98" height="251.4609" style="stroke:#000000;stroke-width:1.5;" width="574.5" x="236.5" y="157.6953"/><rect fill="#ADD8E6" height="373.9922" style="stroke:#000000;stroke-width:1.5;" width="920.5" x="236.5" y="423.1563"/><rect fill="#FF7F50" height="294.5938" style="stroke:#000000;stroke-width:1.5;" width="1030.5" x="236.5" y="811.1484"/><rect fill="#FFFF00" height="386.3906" style="stroke:#000000;stroke-width:1.5;" width="1098" x="236.5" y="1148.875"/><rect fill="#FFC0CB" height="368.9922" style="stroke:#000000;stroke-width:1.5;" width="1347.5" x="119" y="1549.2656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="62" x2="62" y1="81.2969" y2="1935.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="150" x2="150" y1="81.2969" y2="1935.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="301.5" x2="301.5" y1="81.2969" y2="1935.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="513" x2="513" y1="81.2969" y2="1935.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="647" x2="647" y1="81.2969" y2="1935.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="805.5" x2="805.5" y1="81.2969" y2="1935.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="930.5" x2="930.5" y1="81.2969" y2="1935.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1095.5" x2="1095.5" y1="81.2969" y2="1935.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1261.5" x2="1261.5" y1="81.2969" y2="1935.2578"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1395.5" x2="1395.5" y1="81.2969" y2="1935.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="5" y="77.9951">rAppCatalogue</text><ellipse cx="62" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M62,21.5 L62,48.5 M49,29.5 L75,29.5 M62,48.5 L49,63.5 M62,48.5 L75,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="5" y="1947.2529">rAppCatalogue</text><ellipse cx="62" cy="1959.0547" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M62,1967.0547 L62,1994.0547 M49,1975.0547 L75,1975.0547 M62,1994.0547 L49,2009.0547 M62,1994.0547 L75,2009.0547 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="129" y="77.9951">rApp</text><ellipse cx="150" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M150,21.5 L150,48.5 M137,29.5 L163,29.5 M150,48.5 L137,63.5 M150,48.5 L163,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="129" y="1947.2529">rApp</text><ellipse cx="150" cy="1959.0547" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M150,1967.0547 L150,1994.0547 M137,1975.0547 L163,1975.0547 M150,1994.0547 L137,2009.0547 M150,1994.0547 L163,2009.0547 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="246.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="253.5" y="69.9951">rAppManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="246.5" y="1934.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="253.5" y="1954.2529">rAppManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="472" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="479" y="69.9951">capifcore</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="472" y="1934.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="479" y="1954.2529">capifcore</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="578" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="585" y="69.9951">providermanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="578" y="1934.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="585" y="1954.2529">providermanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="749.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="756.5" y="69.9951">helmmanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="749.5" y="1934.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="756.5" y="1954.2529">helmmanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="872.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="879.5" y="69.9951">publishservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="872.5" y="1934.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="879.5" y="1954.2529">publishservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1036.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1043.5" y="69.9951">invokerservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1036.5" y="1934.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1043.5" y="1954.2529">invokerservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1199.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1206.5" y="69.9951">discoverservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1199.5" y="1934.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1206.5" y="1954.2529">discoverservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1334.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1341.5" y="69.9951">securityservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1334.5" y="1934.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1341.5" y="1954.2529">securityservice</text><polygon fill="#181818" points="290,138.6953,300,142.6953,290,146.6953,294,142.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="62" x2="296" y1="142.6953" y2="142.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="69" y="107.3638">Start rApp, with rApp</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="73" y="122.4966">descriptor specifying which</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="73" y="137.6294">services to expose and consume</text><path d="M236.5,157.6953 L302.5,157.6953 L302.5,164.8281 L292.5,174.8281 L236.5,174.8281 L236.5,157.6953 " fill="#98FB98" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="251.4609" style="stroke:#000000;stroke-width:1.5;" width="574.5" x="236.5" y="157.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="251.5" y="170.7622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="140" x="317.5" y="169.9058">[Provider Enrolment]</text><polygon fill="#181818" points="501,207.0938,511,211.0938,501,215.0938,505,211.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="507" y1="211.0938" y2="211.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="309" y="190.895">Register provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="313" y="206.0278">APIProviderEnrolmentDetails</text><polygon fill="#181818" points="635,236.2266,645,240.2266,635,244.2266,639,240.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="513" x2="641" y1="240.2266" y2="240.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="520" y="235.1606">Register provider</text><line style="stroke:#181818;stroke-width:1.0;" x1="647" x2="689" y1="299.625" y2="299.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="689" x2="689" y1="299.625" y2="312.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="648" x2="689" y1="312.625" y2="312.625"/><polygon fill="#181818" points="658,308.625,648,312.625,658,316.625,654,312.625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="654" y="264.2935">Create apiProvDomId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="658" y="279.4263">and apiProvFuncIds</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="658" y="294.5591">for provided functions</text><polygon fill="#181818" points="524,352.8906,514,356.8906,524,360.8906,520,356.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="518" x2="646" y1="356.8906" y2="356.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="530" y="336.6919">Provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="534" y="351.8247">apfId and aefIds</text><polygon fill="#181818" points="313,397.1563,303,401.1563,313,405.1563,309,401.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="512" y1="401.1563" y2="401.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="319" y="380.9575">Provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="323" y="396.0903">apfId and aefIds</text><path d="M236.5,423.1563 L302.5,423.1563 L302.5,430.2891 L292.5,440.2891 L236.5,440.2891 L236.5,423.1563 " fill="#ADD8E6" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="373.9922" style="stroke:#000000;stroke-width:1.5;" width="920.5" x="236.5" y="423.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="251.5" y="436.2231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="317.5" y="435.3667">[Publish Service]</text><polygon fill="#181818" points="501,487.6875,511,491.6875,501,495.6875,505,491.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="507" y1="491.6875" y2="491.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="309" y="456.356">Publish services</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="313" y="471.4888">with providerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="313" y="486.6216">andServiceAPIDescription</text><polygon fill="#181818" points="919,516.8203,929,520.8203,919,524.8203,923,520.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="513" x2="925" y1="520.8203" y2="520.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="520" y="515.7544">Publish services</text><polygon fill="#181818" points="658,561.0859,648,565.0859,658,569.0859,654,565.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="652" x2="930" y1="565.0859" y2="565.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="664" y="544.8872">Are AEFs are</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="668" y="560.02">registered for provider?</text><polygon fill="#181818" points="919,590.2188,929,594.2188,919,598.2188,923,594.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="647" x2="925" y1="594.2188" y2="594.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="654" y="589.1528">Ok</text><line style="stroke:#181818;stroke-width:1.0;" x1="931" x2="973" y1="623.3516" y2="623.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="973" x2="973" y1="623.3516" y2="636.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="932" x2="973" y1="636.3516" y2="636.3516"/><polygon fill="#181818" points="942,632.3516,932,636.3516,942,640.3516,938,636.3516" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="938" y="618.2856">Create apiId</text><polygon fill="#181818" points="817,664.4844,807,668.4844,817,672.4844,813,668.4844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="811" x2="930" y1="668.4844" y2="668.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="823" y="663.4185">Install chart</text><path d="M936,649.3516 L936,674.3516 L1142,674.3516 L1142,659.3516 L1132,649.3516 L936,649.3516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1132,649.3516 L1132,659.3516 L1142,659.3516 L1132,649.3516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="942" y="666.4185">Optional and not decided yet</text><polygon fill="#181818" points="919,696.6172,929,700.6172,919,704.6172,923,700.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="806" x2="925" y1="700.6172" y2="700.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="813" y="695.5513">Ok</text><polygon fill="#181818" points="524,740.8828,514,744.8828,524,748.8828,520,744.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="518" x2="930" y1="744.8828" y2="744.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="530" y="724.6841">ServiceAPIDescription</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="534" y="739.8169">with apiId</text><polygon fill="#181818" points="313,785.1484,303,789.1484,313,793.1484,309,789.1484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="512" y1="789.1484" y2="789.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="319" y="768.9497">ServiceAPIDescription</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="323" y="784.0825">with apiId</text><path d="M236.5,811.1484 L302.5,811.1484 L302.5,818.2813 L292.5,828.2813 L236.5,828.2813 L236.5,811.1484 " fill="#FF7F50" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="294.5938" style="stroke:#000000;stroke-width:1.5;" width="1030.5" x="236.5" y="811.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="251.5" y="824.2153">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="119" x="317.5" y="823.3589">[Register Invoker]</text><polygon fill="#181818" points="501,860.5469,511,864.5469,501,868.5469,505,864.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="507" y1="864.5469" y2="864.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="309" y="844.3481">Register invoker with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="313" y="859.481">APIInvokerEnrolmentDetails</text><polygon fill="#181818" points="1084,889.6797,1094,893.6797,1084,897.6797,1088,893.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="513" x2="1090" y1="893.6797" y2="893.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="520" y="888.6138">Register invoker</text><line style="stroke:#181818;stroke-width:1.0;" x1="1096" x2="1138" y1="937.9453" y2="937.9453"/><line style="stroke:#181818;stroke-width:1.0;" x1="1138" x2="1138" y1="937.9453" y2="950.9453"/><line style="stroke:#181818;stroke-width:1.0;" x1="1097" x2="1138" y1="950.9453" y2="950.9453"/><polygon fill="#181818" points="1107,946.9453,1097,950.9453,1107,954.9453,1103,950.9453" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="1103" y="917.7466">Create apiInvokerId and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="1107" y="932.8794">onboardingSecret</text><polygon fill="#181818" points="942,976.0781,932,980.0781,942,984.0781,938,980.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936" x2="1095" y1="980.0781" y2="980.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="948" y="975.0122">Get available services</text><polygon fill="#181818" points="1084,1005.2109,1094,1009.2109,1084,1013.2109,1088,1009.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="931" x2="1090" y1="1009.2109" y2="1009.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="938" y="1004.145">Available services</text><polygon fill="#181818" points="524,1049.4766,514,1053.4766,524,1057.4766,520,1053.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="518" x2="1095" y1="1053.4766" y2="1053.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="530" y="1033.2778">Services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="534" y="1048.4106">for the invoker</text><polygon fill="#181818" points="313,1093.7422,303,1097.7422,313,1101.7422,309,1097.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="512" y1="1097.7422" y2="1097.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="319" y="1077.5435">Invoker with invokerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="323" y="1092.6763">and available services</text><polygon fill="#181818" points="73,1129.875,63,1133.875,73,1137.875,69,1133.875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="67" x2="301" y1="1133.875" y2="1133.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="79" y="1128.8091">Ok</text><path d="M236.5,1148.875 L302.5,1148.875 L302.5,1156.0078 L292.5,1166.0078 L236.5,1166.0078 L236.5,1148.875 " fill="#FFFF00" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="386.3906" style="stroke:#000000;stroke-width:1.5;" width="1098" x="236.5" y="1148.875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="251.5" y="1161.9419">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126" x="317.5" y="1161.0854">[Discover Services]</text><polygon fill="#181818" points="501,1213.4063,511,1217.4063,501,1221.4063,505,1217.4063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="507" y1="1217.4063" y2="1217.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="309" y="1182.0747">Discover services for an</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="313" y="1197.2075">invoker with apiInvokerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="313" y="1212.3403">and filter parameters</text><polygon fill="#181818" points="1250,1257.6719,1260,1261.6719,1250,1265.6719,1254,1261.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="513" x2="1256" y1="1261.6719" y2="1261.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="520" y="1241.4731">Get services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="524" y="1256.606">for the invoker</text><polygon fill="#181818" points="1107,1301.9375,1097,1305.9375,1107,1309.9375,1103,1305.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1101" x2="1261" y1="1305.9375" y2="1305.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="1113" y="1285.7388">Get services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1117" y="1300.8716">for the invoker</text><polygon fill="#181818" points="942,1331.0703,932,1335.0703,942,1339.0703,938,1335.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936" x2="1095" y1="1335.0703" y2="1335.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="948" y="1330.0044">Get available services</text><polygon fill="#181818" points="1084,1360.2031,1094,1364.2031,1084,1368.2031,1088,1364.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="931" x2="1090" y1="1364.2031" y2="1364.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="938" y="1359.1372">Available services</text><polygon fill="#181818" points="1250,1404.4688,1260,1408.4688,1250,1412.4688,1254,1408.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1096" x2="1256" y1="1408.4688" y2="1408.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="1103" y="1388.27">Services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1103" y="1403.4028">for the invoker</text><polygon fill="#181818" points="524,1463.8672,514,1467.8672,524,1471.8672,520,1467.8672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="518" x2="1261" y1="1467.8672" y2="1467.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="530" y="1432.5356">Services available for the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="534" y="1447.6685">invoker matching the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="534" y="1462.8013">filter parameters</text><polygon fill="#181818" points="313,1523.2656,303,1527.2656,313,1531.2656,309,1527.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="512" y1="1527.2656" y2="1527.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="319" y="1491.9341">Services available for the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="323" y="1507.0669">invoker and matching the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="323" y="1522.1997">filter parameters</text><path d="M119,1549.2656 L185,1549.2656 L185,1556.3984 L175,1566.3984 L119,1566.3984 L119,1549.2656 " fill="#FFC0CB" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="368.9922" style="stroke:#000000;stroke-width:1.5;" width="1347.5" x="119" y="1549.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="134" y="1562.3325">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="117" x="200" y="1561.4761">[Security Service]</text><polygon fill="#181818" points="1383.5,1613.7969,1393.5,1617.7969,1383.5,1621.7969,1387.5,1617.7969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="150" x2="1389.5" y1="1617.7969" y2="1617.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="157" y="1582.4653">Request token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="161" y="1597.5981">for service with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="161" y="1612.731">AccessTokenReq</text><polygon fill="#181818" points="1107,1642.9297,1097,1646.9297,1107,1650.9297,1103,1646.9297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1101" x2="1394.5" y1="1646.9297" y2="1646.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1113" y="1641.8638">Is invoker registered?</text><polygon fill="#181818" points="1383.5,1672.0625,1393.5,1676.0625,1383.5,1680.0625,1387.5,1676.0625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1096" x2="1389.5" y1="1676.0625" y2="1676.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="1103" y="1670.9966">Ok</text><polygon fill="#181818" points="1107,1701.1953,1097,1705.1953,1107,1709.1953,1103,1705.1953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1101" x2="1394.5" y1="1705.1953" y2="1705.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="1113" y="1700.1294">Is secret valid?</text><polygon fill="#181818" points="1383.5,1730.3281,1393.5,1734.3281,1383.5,1738.3281,1387.5,1734.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1096" x2="1389.5" y1="1734.3281" y2="1734.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="1103" y="1729.2622">Ok</text><polygon fill="#181818" points="658,1774.5938,648,1778.5938,658,1782.5938,654,1778.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="652" x2="1394.5" y1="1778.5938" y2="1778.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="664" y="1758.395">Is function providing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="668" y="1773.5278">service registered?</text><polygon fill="#181818" points="1383.5,1803.7266,1393.5,1807.7266,1383.5,1811.7266,1387.5,1807.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="647" x2="1389.5" y1="1807.7266" y2="1807.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="654" y="1802.6606">Ok</text><polygon fill="#181818" points="942,1832.8594,932,1836.8594,942,1840.8594,938,1836.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936" x2="1394.5" y1="1836.8594" y2="1836.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="948" y="1831.7935">Is service published?</text><polygon fill="#181818" points="1383.5,1861.9922,1393.5,1865.9922,1383.5,1869.9922,1387.5,1865.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="931" x2="1389.5" y1="1865.9922" y2="1865.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="938" y="1860.9263">Ok</text><polygon fill="#181818" points="161,1906.2578,151,1910.2578,161,1914.2578,157,1910.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="155" x2="1394.5" y1="1910.2578" y2="1910.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="167" y="1890.0591">AccessTokenRsp with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="171" y="1905.1919">token</text><!--MD5=[36fdf0ab761211112ece45937fee85b6]
@startuml
actor rAppCatalogue
actor rApp
participant rAppManager
box "CAPIF Internal"
participant capifcore
participant providermanager
participant helmmanager
participant publishservice
participant invokerservice
participant discoverservice
participant securityservice
end box

rAppCatalogue->rAppManager: Start rApp, with rApp\n descriptor specifying which\n services to expose and consume
alt#paleGreen #paleGreen Provider Enrolment
    rAppManager->capifcore: Register provider with\n APIProviderEnrolmentDetails
    capifcore->providermanager:Register provider
    providermanager->providermanager: Create apiProvDomId\n and apiProvFuncIds\n for provided functions
    providermanager->capifcore: Provider with\n apfId and aefIds
    capifcore->rAppManager: Provider with\n apfId and aefIds
end
alt#LightBlue #LightBlue Publish Service
    rAppManager->capifcore: Publish services\n with providerId\n andServiceAPIDescription
    capifcore->publishservice: Publish services
    publishservice->providermanager: Are AEFs are\n registered for provider?
    providermanager->publishservice: Ok
    publishservice->publishservice: Create apiId
    publishservice->helmmanager: Install chart
    note right: Optional and not decided yet
    helmmanager->publishservice: Ok
    publishservice->capifcore: ServiceAPIDescription\n with apiId
    capifcore->rAppManager: ServiceAPIDescription\n with apiId
end
alt#coral #coral Register Invoker
    rAppManager->capifcore: Register invoker with\n APIInvokerEnrolmentDetails
    capifcore->invokerservice: Register invoker
    invokerservice->invokerservice: Create apiInvokerId and\n onboardingSecret
    invokerservice->publishservice: Get available services
    publishservice->invokerservice: Available services
    invokerservice->capifcore: Services available\n for the invoker
    capifcore->rAppManager: Invoker with invokerId\n and available services
end
rAppManager->rAppCatalogue: Ok

alt#Yellow #Yellow Discover Services
    rAppManager->capifcore: Discover services for an\n invoker with apiInvokerId\n and filter parameters
    capifcore->discoverservice: Get services available\n for the invoker
    discoverservice->invokerservice: Get services available\n for the invoker
    invokerservice->publishservice: Get available services
    publishservice->invokerservice: Available services
    invokerservice->discoverservice: Services available \nfor the invoker
    discoverservice->capifcore: Services available for the\n invoker matching the\n filter parameters
    capifcore->rAppManager: Services available for the\n invoker and matching the\n filter parameters
end

alt#Pink #Pink Security Service
    rApp->securityservice: Request token\n for service with\n AccessTokenReq
    securityservice->invokerservice: Is invoker registered?
    invokerservice->securityservice: Ok
    securityservice->invokerservice: Is secret valid?
    invokerservice->securityservice: Ok
    securityservice->providermanager: Is function providing\n service registered?
    providermanager->securityservice: Ok
    securityservice->publishservice: Is service published?
    publishservice->securityservice: Ok
    securityservice->rApp: AccessTokenRsp with\n token
end
@enduml

PlantUML version 1.2022.14beta6(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>