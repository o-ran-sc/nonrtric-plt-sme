<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2330px" preserveAspectRatio="none" style="width:1680px;height:2330px;background:#FFFFFF;" version="1.1" viewBox="0 0 1680 2330" width="1680px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="2318.8828" style="stroke:#181818;stroke-width:0.5;" width="1109.5" x="468" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="109" x="968.25" y="18.0669">CAPIF Internal</text><rect fill="#98FB98" height="251.4609" style="stroke:#000000;stroke-width:1.5;" width="574.5" x="236.5" y="157.6953"/><rect fill="#ADD8E6" height="463.3906" style="stroke:#000000;stroke-width:1.5;" width="1484.5" x="109" y="423.1563"/><rect fill="#FFA500" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1464.5" x="119" y="715.6172"/><rect fill="#FF7F50" height="383.9922" style="stroke:#000000;stroke-width:1.5;" width="1484.5" x="109" y="900.5469"/><rect fill="#FFA500" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1464.5" x="119" y="1113.6094"/><rect fill="#FFFF00" height="386.3906" style="stroke:#000000;stroke-width:1.5;" width="1098" x="236.5" y="1327.6719"/><rect fill="#FFC0CB" height="368.9922" style="stroke:#000000;stroke-width:1.5;" width="1347.5" x="119" y="1728.0625"/><rect fill="#FFA500" height="117.5313" style="stroke:#000000;stroke-width:1.5;" width="1555" x="119" y="2111.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="62" x2="62" y1="81.2969" y2="2245.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="150" x2="150" y1="81.2969" y2="2245.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="301.5" x2="301.5" y1="81.2969" y2="2245.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="513" x2="513" y1="81.2969" y2="2245.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="647" x2="647" y1="81.2969" y2="2245.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="805.5" x2="805.5" y1="81.2969" y2="2245.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="930.5" x2="930.5" y1="81.2969" y2="2245.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1095.5" x2="1095.5" y1="81.2969" y2="2245.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1261.5" x2="1261.5" y1="81.2969" y2="2245.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1395.5" x2="1395.5" y1="81.2969" y2="2245.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1519.5" x2="1519.5" y1="81.2969" y2="2245.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="5" y="77.9951">rAppCatalogue</text><ellipse cx="62" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M62,21.5 L62,48.5 M49,29.5 L75,29.5 M62,48.5 L49,63.5 M62,48.5 L75,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="5" y="2257.5811">rAppCatalogue</text><ellipse cx="62" cy="2269.3828" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M62,2277.3828 L62,2304.3828 M49,2285.3828 L75,2285.3828 M62,2304.3828 L49,2319.3828 M62,2304.3828 L75,2319.3828 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="129" y="77.9951">rApp</text><ellipse cx="150" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M150,21.5 L150,48.5 M137,29.5 L163,29.5 M150,48.5 L137,63.5 M150,48.5 L163,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="129" y="2257.5811">rApp</text><ellipse cx="150" cy="2269.3828" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M150,2277.3828 L150,2304.3828 M137,2285.3828 L163,2285.3828 M150,2304.3828 L137,2319.3828 M150,2304.3828 L163,2319.3828 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="246.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="253.5" y="69.9951">rAppManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="246.5" y="2244.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="253.5" y="2264.5811">rAppManager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="472" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="479" y="69.9951">capifcore</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="472" y="2244.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="479" y="2264.5811">capifcore</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="578" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="585" y="69.9951">providermanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="578" y="2244.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="585" y="2264.5811">providermanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="749.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="756.5" y="69.9951">helmmanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="749.5" y="2244.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="756.5" y="2264.5811">helmmanager</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="872.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="879.5" y="69.9951">publishservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="872.5" y="2244.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="879.5" y="2264.5811">publishservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1036.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1043.5" y="69.9951">invokerservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="1036.5" y="2244.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="1043.5" y="2264.5811">invokerservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1199.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1206.5" y="69.9951">discoverservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1199.5" y="2244.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1206.5" y="2264.5811">discoverservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1334.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1341.5" y="69.9951">securityservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1334.5" y="2244.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1341.5" y="2264.5811">securityservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1466.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1473.5" y="69.9951">eventservice</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1466.5" y="2244.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1473.5" y="2264.5811">eventservice</text><polygon fill="#181818" points="290,138.6953,300,142.6953,290,146.6953,294,142.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="62" x2="296" y1="142.6953" y2="142.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="69" y="107.3638">Start rApp, with rApp</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="73" y="122.4966">descriptor specifying which</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="73" y="137.6294">services to expose and consume</text><path d="M236.5,157.6953 L302.5,157.6953 L302.5,164.8281 L292.5,174.8281 L236.5,174.8281 L236.5,157.6953 " fill="#98FB98" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="251.4609" style="stroke:#000000;stroke-width:1.5;" width="574.5" x="236.5" y="157.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="251.5" y="170.7622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="140" x="317.5" y="169.9058">[Provider Enrolment]</text><polygon fill="#181818" points="501,207.0938,511,211.0938,501,215.0938,505,211.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="507" y1="211.0938" y2="211.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="309" y="190.895">Register provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="313" y="206.0278">APIProviderEnrolmentDetails</text><polygon fill="#181818" points="635,236.2266,645,240.2266,635,244.2266,639,240.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="513" x2="641" y1="240.2266" y2="240.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="520" y="235.1606">Register provider</text><line style="stroke:#181818;stroke-width:1.0;" x1="647" x2="689" y1="299.625" y2="299.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="689" x2="689" y1="299.625" y2="312.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="648" x2="689" y1="312.625" y2="312.625"/><polygon fill="#181818" points="658,308.625,648,312.625,658,316.625,654,312.625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="654" y="264.2935">Create apiProvDomId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="658" y="279.4263">and apiProvFuncIds</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="658" y="294.5591">for provided functions</text><polygon fill="#181818" points="524,352.8906,514,356.8906,524,360.8906,520,356.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="518" x2="646" y1="356.8906" y2="356.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="530" y="336.6919">Provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="534" y="351.8247">apfId and aefIds</text><polygon fill="#181818" points="313,397.1563,303,401.1563,313,405.1563,309,401.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="512" y1="401.1563" y2="401.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="319" y="380.9575">Provider with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="323" y="396.0903">apfId and aefIds</text><path d="M109,423.1563 L175,423.1563 L175,430.2891 L165,440.2891 L109,440.2891 L109,423.1563 " fill="#ADD8E6" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="463.3906" style="stroke:#000000;stroke-width:1.5;" width="1484.5" x="109" y="423.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="124" y="436.2231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="190" y="435.3667">[Publish Service]</text><polygon fill="#181818" points="501,487.6875,511,491.6875,501,495.6875,505,491.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="507" y1="491.6875" y2="491.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="309" y="456.356">Publish services</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="313" y="471.4888">with providerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="313" y="486.6216">andServiceAPIDescription</text><polygon fill="#181818" points="919,516.8203,929,520.8203,919,524.8203,923,520.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="513" x2="925" y1="520.8203" y2="520.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="520" y="515.7544">Publish services</text><polygon fill="#181818" points="658,561.0859,648,565.0859,658,569.0859,654,565.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="652" x2="930" y1="565.0859" y2="565.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="664" y="544.8872">Are AEFs are</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="668" y="560.02">registered for provider?</text><polygon fill="#181818" points="919,590.2188,929,594.2188,919,598.2188,923,594.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="647" x2="925" y1="594.2188" y2="594.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="654" y="589.1528">Ok</text><line style="stroke:#181818;stroke-width:1.0;" x1="931" x2="973" y1="623.3516" y2="623.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="973" x2="973" y1="623.3516" y2="636.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="932" x2="973" y1="636.3516" y2="636.3516"/><polygon fill="#181818" points="942,632.3516,932,636.3516,942,640.3516,938,636.3516" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="938" y="618.2856">Create apiId</text><polygon fill="#181818" points="817,664.4844,807,668.4844,817,672.4844,813,668.4844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="811" x2="930" y1="668.4844" y2="668.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="823" y="663.4185">Install chart</text><path d="M936,649.3516 L936,674.3516 L1142,674.3516 L1142,659.3516 L1132,649.3516 L936,649.3516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1132,649.3516 L1132,659.3516 L1142,659.3516 L1132,649.3516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="942" y="666.4185">Optional and not decided yet</text><polygon fill="#181818" points="919,696.6172,929,700.6172,919,704.6172,923,700.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="806" x2="925" y1="700.6172" y2="700.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="813" y="695.5513">Ok</text><path d="M119,715.6172 L185,715.6172 L185,722.75 L175,732.75 L119,732.75 L119,715.6172 " fill="#FFA500" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1464.5" x="119" y="715.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="134" y="728.6841">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="200" y="727.8276">[Subcribed Event Handling]</text><polygon fill="#181818" points="1508,749.8828,1518,753.8828,1508,757.8828,1512,753.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="931" x2="1514" y1="753.8828" y2="753.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="938" y="748.8169">Service published</text><polygon fill="#181818" points="161,779.0156,151,783.0156,161,787.0156,157,783.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="155" x2="1519" y1="783.0156" y2="783.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="167" y="777.9497">CAPIFEventDetail</text><polygon fill="#181818" points="524,830.2813,514,834.2813,524,838.2813,520,834.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="518" x2="930" y1="834.2813" y2="834.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="530" y="814.0825">ServiceAPIDescription</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="534" y="829.2153">with apiId</text><polygon fill="#181818" points="313,874.5469,303,878.5469,313,882.5469,309,878.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="512" y1="878.5469" y2="878.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="319" y="858.3481">ServiceAPIDescription</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="323" y="873.481">with apiId</text><path d="M109,900.5469 L175,900.5469 L175,907.6797 L165,917.6797 L109,917.6797 L109,900.5469 " fill="#FF7F50" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="383.9922" style="stroke:#000000;stroke-width:1.5;" width="1484.5" x="109" y="900.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="124" y="913.6138">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="119" x="190" y="912.7573">[Register Invoker]</text><polygon fill="#181818" points="501,949.9453,511,953.9453,501,957.9453,505,953.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="507" y1="953.9453" y2="953.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="309" y="933.7466">Register invoker with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="313" y="948.8794">APIInvokerEnrolmentDetails</text><polygon fill="#181818" points="1084,979.0781,1094,983.0781,1084,987.0781,1088,983.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="513" x2="1090" y1="983.0781" y2="983.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="520" y="978.0122">Register invoker</text><line style="stroke:#181818;stroke-width:1.0;" x1="1096" x2="1138" y1="1027.3438" y2="1027.3438"/><line style="stroke:#181818;stroke-width:1.0;" x1="1138" x2="1138" y1="1027.3438" y2="1040.3438"/><line style="stroke:#181818;stroke-width:1.0;" x1="1097" x2="1138" y1="1040.3438" y2="1040.3438"/><polygon fill="#181818" points="1107,1036.3438,1097,1040.3438,1107,1044.3438,1103,1040.3438" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="1103" y="1007.145">Create apiInvokerId and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="1107" y="1022.2778">onboardingSecret</text><polygon fill="#181818" points="942,1065.4766,932,1069.4766,942,1073.4766,938,1069.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936" x2="1095" y1="1069.4766" y2="1069.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="948" y="1064.4106">Get available services</text><polygon fill="#181818" points="1084,1094.6094,1094,1098.6094,1084,1102.6094,1088,1098.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="931" x2="1090" y1="1098.6094" y2="1098.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="938" y="1093.5435">Available services</text><path d="M119,1113.6094 L185,1113.6094 L185,1120.7422 L175,1130.7422 L119,1130.7422 L119,1113.6094 " fill="#FFA500" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="1464.5" x="119" y="1113.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="134" y="1126.6763">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="200" y="1125.8198">[Subcribed Event Handling]</text><polygon fill="#181818" points="1508,1147.875,1518,1151.875,1508,1155.875,1512,1151.875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1096" x2="1514" y1="1151.875" y2="1151.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1103" y="1146.8091">Invoker registered</text><polygon fill="#181818" points="161,1177.0078,151,1181.0078,161,1185.0078,157,1181.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="155" x2="1519" y1="1181.0078" y2="1181.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="167" y="1175.9419">CAPIFEventDetail</text><polygon fill="#181818" points="524,1228.2734,514,1232.2734,524,1236.2734,520,1232.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="518" x2="1095" y1="1232.2734" y2="1232.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="530" y="1212.0747">Services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="534" y="1227.2075">for the invoker</text><polygon fill="#181818" points="313,1272.5391,303,1276.5391,313,1280.5391,309,1276.5391" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="512" y1="1276.5391" y2="1276.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="319" y="1256.3403">Invoker with invokerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="323" y="1271.4731">and available services</text><polygon fill="#181818" points="73,1308.6719,63,1312.6719,73,1316.6719,69,1312.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="67" x2="301" y1="1312.6719" y2="1312.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="79" y="1307.606">Ok</text><path d="M236.5,1327.6719 L302.5,1327.6719 L302.5,1334.8047 L292.5,1344.8047 L236.5,1344.8047 L236.5,1327.6719 " fill="#FFFF00" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="386.3906" style="stroke:#000000;stroke-width:1.5;" width="1098" x="236.5" y="1327.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="251.5" y="1340.7388">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126" x="317.5" y="1339.8823">[Discover Services]</text><polygon fill="#181818" points="501,1392.2031,511,1396.2031,501,1400.2031,505,1396.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="302" x2="507" y1="1396.2031" y2="1396.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="309" y="1360.8716">Discover services for an</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="313" y="1376.0044">invoker with apiInvokerId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="313" y="1391.1372">and filter parameters</text><polygon fill="#181818" points="1250,1436.4688,1260,1440.4688,1250,1444.4688,1254,1440.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="513" x2="1256" y1="1440.4688" y2="1440.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="520" y="1420.27">Get services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="524" y="1435.4028">for the invoker</text><polygon fill="#181818" points="1107,1480.7344,1097,1484.7344,1107,1488.7344,1103,1484.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1101" x2="1261" y1="1484.7344" y2="1484.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="1113" y="1464.5356">Get services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1117" y="1479.6685">for the invoker</text><polygon fill="#181818" points="942,1509.8672,932,1513.8672,942,1517.8672,938,1513.8672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936" x2="1095" y1="1513.8672" y2="1513.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="948" y="1508.8013">Get available services</text><polygon fill="#181818" points="1084,1539,1094,1543,1084,1547,1088,1543" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="931" x2="1090" y1="1543" y2="1543"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="938" y="1537.9341">Available services</text><polygon fill="#181818" points="1250,1583.2656,1260,1587.2656,1250,1591.2656,1254,1587.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1096" x2="1256" y1="1587.2656" y2="1587.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="1103" y="1567.0669">Services available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1103" y="1582.1997">for the invoker</text><polygon fill="#181818" points="524,1642.6641,514,1646.6641,524,1650.6641,520,1646.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="518" x2="1261" y1="1646.6641" y2="1646.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="530" y="1611.3325">Services available for the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="534" y="1626.4653">invoker matching the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="534" y="1641.5981">filter parameters</text><polygon fill="#181818" points="313,1702.0625,303,1706.0625,313,1710.0625,309,1706.0625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="512" y1="1706.0625" y2="1706.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="319" y="1670.731">Services available for the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="323" y="1685.8638">invoker and matching the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="323" y="1700.9966">filter parameters</text><path d="M119,1728.0625 L185,1728.0625 L185,1735.1953 L175,1745.1953 L119,1745.1953 L119,1728.0625 " fill="#FFC0CB" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="368.9922" style="stroke:#000000;stroke-width:1.5;" width="1347.5" x="119" y="1728.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="134" y="1741.1294">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="117" x="200" y="1740.2729">[Security Service]</text><polygon fill="#181818" points="1383.5,1792.5938,1393.5,1796.5938,1383.5,1800.5938,1387.5,1796.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="150" x2="1389.5" y1="1796.5938" y2="1796.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="157" y="1761.2622">Request token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="161" y="1776.395">for service with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="161" y="1791.5278">AccessTokenReq</text><polygon fill="#181818" points="1107,1821.7266,1097,1825.7266,1107,1829.7266,1103,1825.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1101" x2="1394.5" y1="1825.7266" y2="1825.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1113" y="1820.6606">Is invoker registered?</text><polygon fill="#181818" points="1383.5,1850.8594,1393.5,1854.8594,1383.5,1858.8594,1387.5,1854.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1096" x2="1389.5" y1="1854.8594" y2="1854.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="1103" y="1849.7935">Ok</text><polygon fill="#181818" points="1107,1879.9922,1097,1883.9922,1107,1887.9922,1103,1883.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1101" x2="1394.5" y1="1883.9922" y2="1883.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="1113" y="1878.9263">Is secret valid?</text><polygon fill="#181818" points="1383.5,1909.125,1393.5,1913.125,1383.5,1917.125,1387.5,1913.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1096" x2="1389.5" y1="1913.125" y2="1913.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="1103" y="1908.0591">Ok</text><polygon fill="#181818" points="658,1953.3906,648,1957.3906,658,1961.3906,654,1957.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="652" x2="1394.5" y1="1957.3906" y2="1957.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="664" y="1937.1919">Is function providing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="668" y="1952.3247">service registered?</text><polygon fill="#181818" points="1383.5,1982.5234,1393.5,1986.5234,1383.5,1990.5234,1387.5,1986.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="647" x2="1389.5" y1="1986.5234" y2="1986.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="654" y="1981.4575">Ok</text><polygon fill="#181818" points="942,2011.6563,932,2015.6563,942,2019.6563,938,2015.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="936" x2="1394.5" y1="2015.6563" y2="2015.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="948" y="2010.5903">Is service published?</text><polygon fill="#181818" points="1383.5,2040.7891,1393.5,2044.7891,1383.5,2048.7891,1387.5,2044.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="931" x2="1389.5" y1="2044.7891" y2="2044.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17" x="938" y="2039.7231">Ok</text><polygon fill="#181818" points="161,2085.0547,151,2089.0547,161,2093.0547,157,2089.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="155" x2="1394.5" y1="2089.0547" y2="2089.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="167" y="2068.856">AccessTokenRsp with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="171" y="2083.9888">token</text><path d="M119,2111.0547 L185,2111.0547 L185,2118.1875 L175,2128.1875 L119,2128.1875 L119,2111.0547 " fill="#FFA500" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="117.5313" style="stroke:#000000;stroke-width:1.5;" width="1555" x="119" y="2111.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="134" y="2124.1216">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99" x="200" y="2123.2651">[Event Service]</text><polygon fill="#181818" points="1508,2145.3203,1518,2149.3203,1508,2153.3203,1512,2149.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="150" x2="1514" y1="2149.3203" y2="2149.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270" x="157" y="2144.2544">Subscribe to event with EventSubscription</text><line style="stroke:#181818;stroke-width:1.0;" x1="1520" x2="1562" y1="2178.4531" y2="2178.4531"/><line style="stroke:#181818;stroke-width:1.0;" x1="1562" x2="1562" y1="2178.4531" y2="2191.4531"/><line style="stroke:#181818;stroke-width:1.0;" x1="1521" x2="1562" y1="2191.4531" y2="2191.4531"/><polygon fill="#181818" points="1531,2187.4531,1521,2191.4531,1531,2195.4531,1527,2191.4531" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1527" y="2173.3872">Create subscriptionId</text><polygon fill="#181818" points="161,2216.5859,151,2220.5859,161,2224.5859,157,2220.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="155" x2="1519" y1="2220.5859" y2="2220.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="167" y="2215.52">subscriptionId</text><!--MD5=[fd36cdbe5acf13a130516e70deb7f4cf]
@startuml
actor rAppCatalogue
actor rApp
participant rAppManager
box "CAPIF Internal"
participant capifcore
participant providermanager
participant helmmanager
participant publishservice
participant invokerservice
participant discoverservice
participant securityservice
participant eventservice
end box

rAppCatalogue->rAppManager: Start rApp, with rApp\n descriptor specifying which\n services to expose and consume
alt#paleGreen #paleGreen Provider Enrolment
    rAppManager->capifcore: Register provider with\n APIProviderEnrolmentDetails
    capifcore->providermanager:Register provider
    providermanager->providermanager: Create apiProvDomId\n and apiProvFuncIds\n for provided functions
    providermanager->capifcore: Provider with\n apfId and aefIds
    capifcore->rAppManager: Provider with\n apfId and aefIds
end
alt#LightBlue #LightBlue Publish Service
    rAppManager->capifcore: Publish services\n with providerId\n andServiceAPIDescription
    capifcore->publishservice: Publish services
    publishservice->providermanager: Are AEFs are\n registered for provider?
    providermanager->publishservice: Ok
    publishservice->publishservice: Create apiId
    publishservice->helmmanager: Install chart
    note right: Optional and not decided yet
    helmmanager->publishservice: Ok
    alt#Orange #Orange Subcribed Event Handling
        publishservice->eventservice: Service published
        eventservice->rApp: CAPIFEventDetail
    end
    publishservice->capifcore: ServiceAPIDescription\n with apiId
    capifcore->rAppManager: ServiceAPIDescription\n with apiId
end
alt#coral #coral Register Invoker
    rAppManager->capifcore: Register invoker with\n APIInvokerEnrolmentDetails
    capifcore->invokerservice: Register invoker
    invokerservice->invokerservice: Create apiInvokerId and\n onboardingSecret
    invokerservice->publishservice: Get available services
    publishservice->invokerservice: Available services
    alt#Orange #Orange Subcribed Event Handling
        invokerservice->eventservice: Invoker registered
        eventservice->rApp: CAPIFEventDetail
    end
    invokerservice->capifcore: Services available\n for the invoker
    capifcore->rAppManager: Invoker with invokerId\n and available services
end
rAppManager->rAppCatalogue: Ok

alt#Yellow #Yellow Discover Services
    rAppManager->capifcore: Discover services for an\n invoker with apiInvokerId\n and filter parameters
    capifcore->discoverservice: Get services available\n for the invoker
    discoverservice->invokerservice: Get services available\n for the invoker
    invokerservice->publishservice: Get available services
    publishservice->invokerservice: Available services
    invokerservice->discoverservice: Services available \nfor the invoker
    discoverservice->capifcore: Services available for the\n invoker matching the\n filter parameters
    capifcore->rAppManager: Services available for the\n invoker and matching the\n filter parameters
end

alt#Pink #Pink Security Service
    rApp->securityservice: Request token\n for service with\n AccessTokenReq
    securityservice->invokerservice: Is invoker registered?
    invokerservice->securityservice: Ok
    securityservice->invokerservice: Is secret valid?
    invokerservice->securityservice: Ok
    securityservice->providermanager: Is function providing\n service registered?
    providermanager->securityservice: Ok
    securityservice->publishservice: Is service published?
    publishservice->securityservice: Ok
    securityservice->rApp: AccessTokenRsp with\n token
end

alt#Orange #Orange Event Service
    rApp->eventservice: Subscribe to event with EventSubscription
    eventservice->eventservice: Create subscriptionId
    eventservice->rApp: subscriptionId
end
@enduml

PlantUML version 1.2022.14beta7(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>